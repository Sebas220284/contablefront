import{d as ge,k as K,E as Ve,b9 as be,O as M,aB as ye,r as xe,o as m,c as x,p as l,w as o,m as s,z as _,q as e,a2 as D,aN as Q,a3 as E,V as $,I as g,b as R,x as w,F as le,a as ae}from"./index.1bb36a93.js";import{u as he}from"./useCrudCashReceiptStore.5fc3b404.js";import{r as h,s as P}from"./validators.bb8f1929.js";import{u as te,V as ke}from"./useImageUpload.49dcf1d8.js";import{u as O}from"./useSelect2Infite.14981200.js";import{a as u,V as p}from"./VRow.971cb494.js";import{V as v}from"./VBtn.22d55266.js";import{V as T}from"./VSelect.ff4ebc03.js";import{V}from"./VTextField.1b37a66e.js";import{V as N}from"./VDivider.5fbe829f.js";import{V as G}from"./VTable.ef7fd960.js";import{V as Ae}from"./VCheckbox.b279b9c1.js";import{V as Ce}from"./VTextarea.43ed9da5.js";import{V as Se}from"./VForm.9a7f2cfe.js";const Ue=s("div",{class:"col-md-6"},null,-1),$e={class:"col-md-6 d-flex justify-content-end"},Le={class:"d-flex justify-content-center aling-items-center"},Re={key:0,class:"d-flex justify-content-between aling-items-center p-2"},we={class:"d-flex justify-content-center aling-items-center"},Ne={key:0,class:"d-flex justify-content-between aling-items-center p-2"},Fe={class:"d-flex justify-content-center aling-items-center"},Ie={key:0,class:"d-flex justify-content-between aling-items-center p-2"},De={class:"celdas"},Ee=s("th",{class:"celdas"},"Vencimiento",-1),Te=s("th",{class:"celdas"},"Couta",-1),je=s("th",{class:"celdas"},"Saldo",-1),ze=s("th",{class:"celdas"},null,-1),Be=s("span",{class:"text-center text-success"},"Se crear\xE1 un anticipo al tercero por valor de",-1),Ke={class:"text-left text-success"},Qe={class:"d-flex justify-content-center"},Oe={class:"text-center text-success"},qe=s("th",null,"#",-1),Me=s("th",null,"Cuenta contable",-1),Pe=s("th",null,"Detalle",-1),Ge=s("th",null,"Descripci\xF3n",-1),He=s("th",null,"D\xE9bito",-1),Je=s("th",null,"Cr\xE9dito",-1),We={class:"d-flex justify-content-center aling-items-center"},Xe={key:0,class:"d-flex justify-content-between aling-items-center p-2"},Ye={style:{width:"15%"}},Ze={style:{width:"15%"}},el={style:{width:"5%"}},ll=s("thead",null,[s("tr",null,[s("th",null,"Archivo"),s("th",null,"Nombre"),s("th",null,"Accion")])],-1),al={key:0},tl={key:1},ol=["href"],yl=ge({__name:"Form",setup(sl){const q=K(),j=Ve(),f=he(),z=K(te()),{formulario:r,arrayPerformA:oe,arrayCurrencies:se,customers_arrayInfo:H,customers_countLinks:re,loading:L,arrayAuxSubAux:J,auxSubAux_countLinks:ue,arrayArchives:W,formArchive:F,errorsArrayArchive:I,arrayAdvanced:B,arrayAuxSubAuxAvanced:X,auxSubAuxAvanced_countLinks:de,cashReceiptConfiguration_arrayInfo:Y,cashReceiptConfiguration_countLinks:ne}=be(f),c=K([]),ie=K(te()),ce=K([]),Z=async d=>{var a;f.clearFormulario(),f.clearFormArchive(),f.typeAction=d,ce.value=[],c.value=[],ie.value.clearData(),await((a=q.value)==null?void 0:a.resetValidation()),d!="back"&&f.keyList++},me=async()=>{var a;r.value.company_id=j.company.id;const d=await((a=q.value)==null?void 0:a.validate());if(d!=null&&d.valid){const n=await f.fetchSave();n.status===200&&Z("list"),n.status===422&&(c.value=n.error)}},ve=()=>{if(F.value.archive=z.value.imageFile,console.log("FORARCHIVE",F.value),!F.value.name||!z.value.imageFile)return F.value.name||(I.value.name="Este campo es obligatorio"),F.value.archive||(I.value.archive="Este campo es obligatorio"),!1;f.addArrayArchives(),z.value.key++},fe=(d,a)=>{const n=y.dataNueva.value.find(t=>t.id===d);n&&(a.description=n.name)},k=M(()=>{let d=0;if(B.value.length>0)return B.value.forEach(a=>{var t;const n=Number((t=a.debit)!=null?t:0);d+=n},0),d!=null?d:0}),A=M(()=>{let d=0;if(B.value.length>0)return B.value.forEach(a=>{var t;const n=Number((t=a.credit)!=null?t:0);d+=n},0),d!=null?d:0}),pe=M(()=>{var a,n,t,U;let d=0;return!A.value&&k.value&&(d+=k.value),!k.value&&A.value&&(d+=A.value),A.value&&k.value&&(A.value>k.value&&(d=((a=A.value)!=null?a:0)-((n=k.value)!=null?n:0)),A.value<k.value&&(d=((t=k.value)!=null?t:0)-((U=A.value)!=null?U:0))),r.value.total_debit=k.value,r.value.total_credit=A.value,r.value.difference_credit_debit=d,d}),ee=()=>{r.value.perform_id==1&&r.value.received_value?r.value.ckeckCashRecipt=1:r.value.ckeckCashRecipt=0},_e=(d,a)=>{let n=b.dataNueva.value.find(t=>t.id===d);n&&(a.auxSubAux_table=n.table,a.auxSubAux_id=n.id)},C=O(f.fetchCustomerOfThirdList,H,{company_id:j.company.id}),b=O(f.fetchLedgerAccountAuxiliaryList,J,{company_id:j.company.id}),y=O(f.fetchLedgerAccountAuxiliaryAvancedList,X,{company_id:j.company.id}),S=O(f.cashReceiptConfigurationList,Y,{company_id:j.company.id});return ye(async()=>{await f.fetchDataForm(),C.dataNueva.value=H.value,C.totalLinks.value=re.value,b.dataNueva.value=J.value,b.totalLinks.value=ue.value,y.dataNueva.value=X.value,y.totalLinks.value=de.value,S.dataNueva.value=Y.value,S.totalLinks.value=ne.value}),(d,a)=>{const n=xe("RouterLink");return m(),x("div",null,[l(p,null,{default:o(()=>[l(u,{cols:"12",class:""},{default:o(()=>[Ue,s("div",$e,[l(v,{color:"secondary",onClick:a[0]||(a[0]=t=>Z("list"))},{default:o(()=>[_(" Atras ")]),_:1})])]),_:1})]),_:1}),l(Se,{ref_key:"formValidation",ref:q,"lazy-validation":""},{default:o(()=>[l(p,null,{default:o(()=>[l(u,{cols:"6"},{default:o(()=>[l(T,{"item-title":"title","item-value":"id",label:"Tipo",modelValue:e(r).crConfigurations_id,"onUpdate:modelValue":[a[4]||(a[4]=t=>e(r).crConfigurations_id=t),a[5]||(a[5]=t=>e(c).crConfigurations_id="")],items:e(S).dataNueva.value,rules:[e(h)],"error-messages":e(c).crConfigurations_id},{"prepend-item":o(()=>[l(V,{placeholder:"Buscar...",class:"mb-2",modelValue:e(S).searchQuery.value,"onUpdate:modelValue":a[1]||(a[1]=t=>e(S).searchQuery.value=t)},null,8,["modelValue"]),l(N)]),"append-item":o(()=>[l(N),s("div",Le,[D(l(Q,{size:"24",color:"primary",indeterminate:""},null,512),[[E,e(L)]])]),e(L)?g("",!0):(m(),x("div",Re,[l(n,{to:{name:"Admin-CashReceiptConfiguration-Index"},class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},{default:o(()=>[l(v,{color:"success"},{default:o(()=>[_("Crear Registro")]),_:1})]),_:1}),s("div",null,[l(v,{class:"mt-2",disabled:e(S).page.value<=1,onClick:a[2]||(a[2]=t=>e(S).prev()),color:"success"},{default:o(()=>[l($,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),l(v,{class:"mt-2",disabled:e(S).page.value>=e(S).totalLinks.value,onClick:a[3]||(a[3]=t=>e(S).next()),color:"success"},{default:o(()=>[l($,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:1},8,["modelValue","items","rules","error-messages"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(V,{rules:[e(h)],modelValue:e(r).number,"onUpdate:modelValue":a[6]||(a[6]=t=>e(r).number=t),autocomplete:"off","error-messages":e(c).number,label:"N\xFAmero",onKeypress:a[7]||(a[7]=t=>e(c).number="")},null,8,["rules","modelValue","error-messages"])]),_:1})]),_:1}),l(p,null,{default:o(()=>[l(u,{cols:"6"},{default:o(()=>[l(T,{"item-title":"full_name","item-value":"id",label:"Cliente",modelValue:e(r).customer_id,"onUpdate:modelValue":[a[11]||(a[11]=t=>e(r).customer_id=t),a[12]||(a[12]=t=>e(c).customer_id="")],items:e(C).dataNueva.value,rules:[e(h)],"error-messages":e(c).customer_id},{"prepend-item":o(()=>[l(V,{placeholder:"Buscar...",class:"mb-2",modelValue:e(C).searchQuery.value,"onUpdate:modelValue":a[8]||(a[8]=t=>e(C).searchQuery.value=t)},null,8,["modelValue"]),l(N)]),"append-item":o(()=>[l(N),s("div",we,[D(l(Q,{size:"24",color:"primary",indeterminate:""},null,512),[[E,e(L)]])]),e(L)?g("",!0):(m(),x("div",Ne,[l(n,{to:{name:"Admin-Third-Index"},class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},{default:o(()=>[l(v,{color:"success"},{default:o(()=>[_("Crear Registro")]),_:1})]),_:1}),s("div",null,[l(v,{class:"mt-2",disabled:e(C).page.value<=1,onClick:a[9]||(a[9]=t=>e(C).prev()),color:"success"},{default:o(()=>[l($,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),l(v,{class:"mt-2",disabled:e(C).page.value>=e(C).totalLinks.value,onClick:a[10]||(a[10]=t=>e(C).next()),color:"success"},{default:o(()=>[l($,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:1},8,["modelValue","items","rules","error-messages"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(V,{type:"date",rules:[e(h)],modelValue:e(r).date_elaboration,"onUpdate:modelValue":a[13]||(a[13]=t=>e(r).date_elaboration=t),autocomplete:"off","error-messages":e(c).date_elaboration,label:"Fecha de elaboraci\xF3n",onChange:a[14]||(a[14]=t=>e(c).date_elaboration="")},null,8,["rules","modelValue","error-messages"])]),_:1})]),_:1}),l(p,null,{default:o(()=>[l(u,{cols:"6"},{default:o(()=>[l(T,{rules:[e(h)],items:e(oe),modelValue:e(r).perform_id,"onUpdate:modelValue":[a[15]||(a[15]=t=>e(r).perform_id=t),a[16]||(a[16]=t=>{e(c).perform_id="",ee()})],"item-title":"name","item-value":"id",label:"Realizar un","error-messages":e(c).perform_id},null,8,["rules","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(T,{"item-title":"name","item-value":"id",label:"Donde ingresa el dinero",modelValue:e(r).auxSubAux_id,"onUpdate:modelValue":[a[20]||(a[20]=t=>e(r).auxSubAux_id=t),a[21]||(a[21]=t=>{e(c).auxSubAux_id="",_e(e(r).auxSubAux_id,e(r))})],items:e(b).dataNueva.value,rules:[e(h)],"error-messages":e(c).auxSubAux_id},{"prepend-item":o(()=>[l(V,{placeholder:"Buscar...",class:"mb-2",modelValue:e(b).searchQuery.value,"onUpdate:modelValue":a[17]||(a[17]=t=>e(b).searchQuery.value=t)},null,8,["modelValue"]),l(N)]),"append-item":o(()=>[l(N),s("div",Fe,[D(l(Q,{size:"24",color:"primary",indeterminate:""},null,512),[[E,e(L)]])]),e(L)?g("",!0):(m(),x("div",Ie,[l(n,{to:{name:"Admin-Third-Index"},class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},{default:o(()=>[l(v,{color:"success"},{default:o(()=>[_("Crear Registro")]),_:1})]),_:1}),s("div",null,[l(v,{class:"mt-2",disabled:e(b).page.value<=1,onClick:a[18]||(a[18]=t=>e(b).prev()),color:"success"},{default:o(()=>[l($,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),l(v,{class:"mt-2",disabled:e(b).page.value>=e(b).totalLinks.value,onClick:a[19]||(a[19]=t=>e(b).next()),color:"success"},{default:o(()=>[l($,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:1},8,["modelValue","items","rules","error-messages"])]),_:1})]),_:1}),l(p,null,{default:o(()=>[l(u,{cols:"6"},{default:o(()=>[l(T,{rules:[e(h)],items:e(se),modelValue:e(r).currencie_id,"onUpdate:modelValue":[a[22]||(a[22]=t=>e(r).currencie_id=t),a[23]||(a[23]=t=>e(c).currencie_id="")],"item-title":"name","item-value":"id",label:"Moneda","error-messages":e(c).currencie_id},null,8,["rules","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(V,{maxlength:"15",rules:[e(h)],modelValue:e(r).received_value,"onUpdate:modelValue":a[24]||(a[24]=t=>e(r).received_value=t),"error-messages":e(c).received_value,label:"Valor recibido",placeholder:"0.00",onKeypress:a[25]||(a[25]=t=>{e(c).received_value="",e(P)(t)}),onKeyup:a[26]||(a[26]=t=>ee())},null,8,["rules","modelValue","error-messages"])]),_:1})]),_:1}),e(r).perform_id==1?(m(),R(p,{key:0},{default:o(()=>[l(u,{cols:"12"},{default:o(()=>[l(G,{class:"table-style"},{default:o(()=>[s("thead",null,[s("tr",null,[s("th",De,[l(Ae,{modelValue:e(r).ckeckCashRecipt,"onUpdate:modelValue":a[27]||(a[27]=t=>e(r).ckeckCashRecipt=t),"true-value":1,"false-value":0},null,8,["modelValue"])]),Ee,Te,je,ze])])]),_:1})]),_:1})]),_:1})):g("",!0),e(r).perform_id==1&&e(r).received_value?(m(),R(p,{key:1},{default:o(()=>[l(u,{cols:"8"},{default:o(()=>[Be]),_:1}),l(u,{cols:"4",class:"text-right"},{default:o(()=>[s("span",Ke,w(e(r).received_value),1)]),_:1})]),_:1})):g("",!0),e(r).perform_id==2&&e(r).received_value?(m(),R(p,{key:2},{default:o(()=>[l(u,{cols:"12"},{default:o(()=>[s("div",Qe,[s("span",Oe,"Se crear\xE1 un anticipo al tercero por valor de "+w(e(r).received_value),1)])]),_:1})]),_:1})):g("",!0),e(r).perform_id==3?(m(),R(p,{key:3},{default:o(()=>[l(u,{cols:"12"},{default:o(()=>[l(G,null,{default:o(()=>[s("thead",null,[s("tr",null,[qe,Me,Pe,Ge,He,Je,s("th",null,[l(v,{color:"primary",onClick:a[28]||(a[28]=t=>e(f).addArrayAdvanced())},{default:o(()=>[_("+")]),_:1})])])]),s("tbody",null,[(m(!0),x(le,null,ae(e(B),(t,U)=>D((m(),x("tr",{key:U},[s("td",null,w(U+1),1),s("td",null,[l(T,{"item-title":"nameCode","item-value":"id",modelValue:t.ledgerAccount_id,"onUpdate:modelValue":[i=>t.ledgerAccount_id=i,i=>{e(c).ledgerAccount_id="",fe(i,t)}],items:e(y).dataNueva.value,rules:[e(h)],"error-messages":e(c).ledgerAccount_id},{"prepend-item":o(()=>[l(V,{placeholder:"Buscar...",class:"mb-2",modelValue:e(y).searchQuery.value,"onUpdate:modelValue":a[29]||(a[29]=i=>e(y).searchQuery.value=i)},null,8,["modelValue"]),l(N)]),"append-item":o(()=>[l(N),s("div",We,[D(l(Q,{size:"24",color:"primary",indeterminate:""},null,512),[[E,e(L)]])]),e(L)?g("",!0):(m(),x("div",Xe,[l(n,{to:{name:"Admin-Third-Index"},class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},{default:o(()=>[l(v,{color:"success"},{default:o(()=>[_("Crear Registro")]),_:1})]),_:1}),s("div",null,[l(v,{class:"mt-2",disabled:e(y).page.value<=1,onClick:a[30]||(a[30]=i=>e(y).prev()),color:"success"},{default:o(()=>[l($,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),l(v,{class:"mt-2",disabled:e(y).page.value>=e(y).totalLinks.value,onClick:a[31]||(a[31]=i=>e(y).next()),color:"success"},{default:o(()=>[l($,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:2},1032,["modelValue","onUpdate:modelValue","items","rules","error-messages"])]),s("td",null,[l(V,{disabled:"",clearable:"",modelValue:t.detail,"onUpdate:modelValue":i=>t.detail=i},null,8,["modelValue","onUpdate:modelValue"])]),s("td",null,[l(V,{disabled:!t.ledgerAccount_id,clearable:"",rules:[e(h)],modelValue:t.description,"onUpdate:modelValue":i=>t.description=i},null,8,["disabled","rules","modelValue","onUpdate:modelValue"])]),s("td",Ye,[l(V,{disabled:!t.ledgerAccount_id,clearable:"",modelValue:t.debit,"onUpdate:modelValue":i=>t.debit=i,onKeypress:i=>{t.credit="",e(P)(i)},placeholder:"0.00"},null,8,["disabled","modelValue","onUpdate:modelValue","onKeypress"])]),s("td",Ze,[l(V,{disabled:!t.ledgerAccount_id,clearable:"",modelValue:t.credit,"onUpdate:modelValue":i=>t.credit=i,onKeypress:i=>{t.debit="",e(P)(i)},placeholder:"0.00"},null,8,["disabled","modelValue","onUpdate:modelValue","onKeypress"])]),s("td",el,[l(v,{onClick:i=>e(f).deleteArrayAdvanced(U,t),icon:"tabler-trash",variant:"text",color:"error"},null,8,["onClick"])])])),[[E,t.delete!="delete"]])),128))])]),_:1})]),_:1})]),_:1})):g("",!0),e(r).perform_id==3?(m(),R(p,{key:4},{default:o(()=>[l(u,{cols:"5"}),l(u,{cols:"2"},{default:o(()=>[_("Total:")]),_:1}),l(u,{cols:"2"},{default:o(()=>[_(w(e(k)),1)]),_:1}),l(u,{cols:"2"},{default:o(()=>[_(w(e(A)),1)]),_:1}),l(u,{cols:"1"})]),_:1})):g("",!0),e(r).perform_id==3?(m(),R(p,{key:5},{default:o(()=>[l(u,{cols:"5"}),l(u,{cols:"2"},{default:o(()=>[_("Diferencia:")]),_:1}),l(u,{cols:"3"},{default:o(()=>[_(w(e(pe)),1)]),_:1}),l(u,{cols:"1"}),l(u,{cols:"1"})]),_:1})):g("",!0),l(p,null,{default:o(()=>[l(u,{cols:"6"},{default:o(()=>[(m(),R(ke,{id:"archive","show-size":"",counter:"",label:"Archivo",onChange:e(z).handleImageSelected,onClick:a[32]||(a[32]=t=>e(I).archive=""),key:e(z).key,"error-messages":e(I).archive},null,8,["onChange","error-messages"]))]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(V,{label:"Nombre del archivo",modelValue:e(F).name,"onUpdate:modelValue":a[33]||(a[33]=t=>e(F).name=t),onKeypress:a[34]||(a[34]=t=>e(I).name=""),"error-messages":e(I).name},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"2"},{default:o(()=>[l(v,{color:"primary",onClick:a[35]||(a[35]=t=>ve())},{default:o(()=>[_("+ Agregar")]),_:1})]),_:1})]),_:1}),e(W).length>0?(m(),R(p,{key:6},{default:o(()=>[l(u,{cols:"12"},{default:o(()=>[l(G,null,{default:o(()=>[ll,s("tbody",null,[(m(!0),x(le,null,ae(e(W),(t,U)=>D((m(),x("tr",{key:U},[t.id?g("",!0):(m(),x("td",al,w(t.archive.name),1)),t.id?(m(),x("td",tl,[s("a",{href:t.archive},"Descargar",8,ol)])):g("",!0),s("td",null,w(t.name),1),s("td",null,[l(v,{size:"x-small",color:"error",variant:"text",onClick:i=>e(f).deleteArrayArchives(U,t)},{default:o(()=>[l($,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])])])),[[E,t.delete!="delete"]])),128))])]),_:1})]),_:1})]),_:1})):g("",!0),l(p,null,{default:o(()=>[l(u,{cols:"12"},{default:o(()=>[l(Ce,{rules:[e(h)],label:"Observaciones",modelValue:e(r).observation,"onUpdate:modelValue":a[36]||(a[36]=t=>e(r).observation=t)},null,8,["rules","modelValue"])]),_:1})]),_:1}),l(p,null,{default:o(()=>[l(u,{cols:"12 d-flex justify-content-center"},{default:o(()=>[l(v,{color:"primary",onClick:a[37]||(a[37]=t=>me())},{default:o(()=>[_("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},512)])}}});export{yl as _};
