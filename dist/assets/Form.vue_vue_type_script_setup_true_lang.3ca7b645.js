import{d as ue,E as re,b9 as de,k as S,aB as ie,o as y,c as h,p as e,w as o,z as U,ba as F,F as N,a as P,q as l,b as q,m as g,x as me,bE as w,a2 as I,V as Q,a3 as A,bF as O}from"./index.1bb36a93.js";import{S as z}from"./sweetalert2.74fe64d4.js";import{u as fe}from"./useThirdStore.74e41bd2.js";import{r as v,l as k,s as L,e as W}from"./validators.bb8f1929.js";import{V as M}from"./index.5010adc7.js";import{a as n,V as i}from"./VRow.971cb494.js";import{V as _}from"./VBtn.22d55266.js";import{V as X}from"./VCheckbox.b279b9c1.js";import{V as f}from"./VTextField.1b37a66e.js";import{V as C}from"./VSelect.ff4ebc03.js";import{V as j}from"./VDivider.5fbe829f.js";import{V as pe}from"./VForm.9a7f2cfe.js";const ve={class:"mt-4 mb-4"},Ve=g("span",null,"Todos los campos marcados con * son obligatorios para la creaci\xF3n del tercero",-1),ce=g("span",null,"Tipo de tercero *",-1),_e=g("span",null,"* Datos b\xE1sicos",-1),ge=g("span",null,"* Datos para facturaci\xF3n y env\xEDo",-1),be=g("span",null,"Responsabilidad fiscal",-1),ye=g("br",null,null,-1),xe=g("span",null,"Verifica la responsabilidad en el RUT de tu cliente m\xEDnimo asignar R-99-PN",-1),De=ue({__name:"Form",setup(Ue){const G=re(),V=fe(),{showContact:$,showSeller:K,basicDataType:Y,fiscalResponsability:Z,typeIdentification:ee,typeOfThird:le,typeRegimeIva:ae,showObservation:E,arrayPhone:R,arrayContact:D,userCompany:H,formulario:s,errorsArrayContact:m,departaments:oe,cities:te,errorsArrayPhone:c}=de(V),B=S(),p=S([]),J=async b=>{var t;await((t=B.value)==null?void 0:t.resetValidation()),p.value=[],V.typeAction=b,b!="back"&&V.keyList++},x=S(!0),T=S(!0),se=async()=>{var t;console.log("FORMULARIO",s.value);const b=await((t=B.value)==null?void 0:t.validate());if(s.value.company_id=G.company.id,s.value.arrayPhone=R,s.value.arrayContact=D,x.value=!0,D.value.forEach((a,u)=>{a.name?m.value[u].name="":(m.value[u].name="Este campo es obligatorio",x.value=!1),a.email?m.value[u].email="":(m.value[u].email="Este campo es obligatorio",x.value=!1),a.last_name?m.value[u].last_name="":(m.value[u].last_name="Este campo es obligatorio",x.value=!1),a.charge?m.value[u].charge="":(m.value[u].charge="Este campo es obligatorio",x.value=!1),a.indicative?m.value[u].indicative="":(m.value[u].indicative="Este campo es obligatorio",x.value=!1),a.phone?m.value[u].phone="":(m.value[u].phone="Este campo es obligatorio",x.value=!1)}),T.value=!0,R.value.forEach((a,u)=>{a.indicative?c.value[u].indicative="":(c.value[u].indicative="Este campo es obligatorio",T.value=!1),a.phone?c.value[u].phone="":(c.value[u].phone="Este campo es obligatorio",T.value=!1),a.extension?c.value[u].extension="":(c.value[u].extension="Este campo es obligatorio",T.value=!1)}),s.value.arrayTypeThird.length==0)return z.fire("Ingrese almenos un tipo de tercero","","question"),!1;if(!T.value||R.value.length<1)return z.fire("Ingrese almenos un tel\xE9fono","","question"),!1;if(!x.value||D.value.length<1)return z.fire("Ingrese almenos un contacto","","question"),!1;if(s.value.arrayFiscalResponsability.length==0)return z.fire("Ingrese almenos una Responsabilidad fiscal","","question"),!1;if(b!=null&&b.valid){const a=await V.fetchSave();a.status===200&&J("list"),a.status===422&&(p.value=a.error)}},ne=b=>{s.value.departament_id=b,V.getCities()};return ie(()=>{V.fetchDataForm(G.company.id)}),(b,t)=>(y(),h("div",ve,[e(i,null,{default:o(()=>[e(n,{cols:"12",class:"d-flex justify-content-end"},{default:o(()=>[e(_,{color:"secondary",onClick:t[0]||(t[0]=a=>J("back"))},{default:o(()=>[U(" Atras ")]),_:1})]),_:1})]),_:1}),e(pe,{ref_key:"formValidation",ref:B,"lazy-validation":""},{default:o(()=>[e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[Ve]),_:1}),e(n,{cols:"12"},{default:o(()=>[e(F,null,{default:o(()=>[e(i,{class:"px-5 py-5"},{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[ce]),_:1}),(y(!0),h(N,null,P(l(le),(a,u)=>(y(),q(n,{cols:"4"},{default:o(()=>[e(X,{label:a.name,value:a.id,onClick:r=>l(V).addTypeThird(a.id),"true-value":"Activo","false-value":"Inactivo",modelValue:a.estado,"onUpdate:modelValue":r=>a.estado=r},null,8,["label","value","onClick","modelValue","onUpdate:modelValue"]),g("span",null,me(a.description),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(i,null,{default:o(()=>[e(n,null,{default:o(()=>[e(F,{class:"mx-auto"},{default:o(()=>[e(w,null,{default:o(()=>[e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[_e]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(f,{maxlength:"50",label:"Nombres *",modelValue:l(s).name,"onUpdate:modelValue":t[1]||(t[1]=a=>l(s).name=a),"error-messages":l(p).name,onKeypress:t[2]||(t[2]=a=>l(p).name=""),onKeyup:t[3]||(t[3]=a=>l(s).contact_name=l(s).name),rules:[l(v),l(k)(l(s).name,50)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(f,{maxlength:"50",label:"Apellidos *",modelValue:l(s).last_name,"onUpdate:modelValue":t[4]||(t[4]=a=>l(s).last_name=a),"error-messages":l(p).last_name,onKeypress:t[5]||(t[5]=a=>l(p).last_name=""),onKeyup:t[6]||(t[6]=a=>l(s).contact_last_name=l(s).last_name),rules:[l(v),l(k)(l(s).name,50)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(f,{maxlength:"255","error-messages":l(p).trade_name,onKeypress:t[7]||(t[7]=a=>l(p).trade_name=""),label:"Nombre comercial",modelValue:l(s).trade_name,"onUpdate:modelValue":t[8]||(t[8]=a=>l(s).trade_name=a)},null,8,["error-messages","modelValue"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(C,{items:l(Y),"item-title":"name","item-value":"id",label:"Tipo *",modelValue:l(s).basic_data_types_id,"onUpdate:modelValue":[t[9]||(t[9]=a=>l(s).basic_data_types_id=a),t[10]||(t[10]=a=>l(p).basic_data_types_id="")],"error-messages":l(p).basic_data_types_id,rules:[l(v)]},null,8,["items","modelValue","error-messages","rules"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(C,{items:l(ee),"item-title":"name","item-value":"id",label:"Tipo de identificaci\xF3n",modelValue:l(s).type_identifications_id,"onUpdate:modelValue":t[11]||(t[11]=a=>l(s).type_identifications_id=a)},null,8,["items","modelValue"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(f,{maxlength:"50",label:"Identificaci\xF3n *",modelValue:l(s).identifications,"onUpdate:modelValue":t[12]||(t[12]=a=>l(s).identifications=a),"error-messages":l(p).identifications,onKeypress:t[13]||(t[13]=a=>l(p).identifications=""),rules:[l(v),l(k)(l(s).identifications,50)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(f,{maxlength:"3",label:"Codigo de la sucursal",modelValue:l(s).branch_code,"onUpdate:modelValue":t[14]||(t[14]=a=>l(s).branch_code=a)},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(C,{items:l(oe),"item-title":"name","item-value":"id",label:"Departamento","error-messages":l(p).departament_id,modelValue:l(s).departament_id,"onUpdate:modelValue":[t[15]||(t[15]=a=>l(s).departament_id=a),ne],rules:[l(v)]},null,8,["items","error-messages","modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(C,{items:l(te),"item-title":"name",label:"Ciudad","item-value":"id","error-messages":l(p).city_id,modelValue:l(s).city_id,"onUpdate:modelValue":[t[16]||(t[16]=a=>l(s).city_id=a),l(s).city_id],rules:[l(v)]},null,8,["items","error-messages","modelValue","onUpdate:modelValue","rules"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[e(f,{maxlength:"255",label:"Direcci\xF3n",modelValue:l(s).address,"onUpdate:modelValue":t[17]||(t[17]=a=>l(s).address=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[e(_,{onClick:t[18]||(t[18]=a=>l(V).addFormPhone())},{default:o(()=>[U("+ Agregar Tel\xE9fono")]),_:1})]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[(y(!0),h(N,null,P(l(R),(a,u)=>I((y(),q(i,{key:u},{default:o(()=>[e(n,{cols:"3"},{default:o(()=>{var r;return[e(f,{modelValue:a.indicative,"onUpdate:modelValue":d=>a.indicative=d,maxlength:"10",label:"Indicativo","error-messages":(r=l(c)[u])==null?void 0:r.indicative,rules:[l(v)],onKeypress:d=>l(c)[u].indicative=""},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"4"},{default:o(()=>{var r;return[e(f,{modelValue:a.phone,"onUpdate:modelValue":d=>a.phone=d,maxlength:"10",label:"# de Tel\xE9fono","error-messages":(r=l(c)[u])==null?void 0:r.phone,rules:[l(v)],onKeypress:d=>{l(c)[u].phone="",l(L)(d)}},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"4"},{default:o(()=>{var r;return[e(f,{modelValue:a.extension,"onUpdate:modelValue":d=>a.extension=d,maxlength:"10",label:"Extensi\xF3n","error-messages":(r=l(c)[u])==null?void 0:r.extension,rules:[l(v)],onKeypress:d=>l(c)[u].extension=""},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"1"},{default:o(()=>[e(_,{size:"x-small",color:"error",variant:"text",onClick:r=>l(V).deleteFormPhone(u,a)},{default:o(()=>[e(Q,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[A,a.delete!="delete"]])),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(i,null,{default:o(()=>[e(n,null,{default:o(()=>[e(F,{class:"mx-auto"},{default:o(()=>[e(w,null,{default:o(()=>[e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[ge]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(f,{maxlength:"50",label:"Nombres del contacto *",modelValue:l(s).contact_name,"onUpdate:modelValue":t[19]||(t[19]=a=>l(s).contact_name=a),"error-messages":l(p).contact_name,onKeypress:t[20]||(t[20]=a=>l(p).contact_name=""),rules:[l(v),l(k)(l(s).contact_name,50)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(f,{maxlength:"50",label:"Apellidos del contacto",modelValue:l(s).contact_last_name,"onUpdate:modelValue":t[21]||(t[21]=a=>l(s).contact_last_name=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(f,{maxlength:"50",label:"Correo electr\xF3nico *",modelValue:l(s).email_fac,"onUpdate:modelValue":t[22]||(t[22]=a=>l(s).email_fac=a),"error-messages":l(p).email_fac,onKeypress:t[23]||(t[23]=a=>l(p).email_fac=""),rules:[l(v),l(W),l(k)(l(s).email_fac,50)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(C,{items:l(ae),"item-title":"name","item-value":"id",label:"Tipo de r\xE9gimen IVA",modelValue:l(s).type_regime_ivas_id,"onUpdate:modelValue":t[24]||(t[24]=a=>l(s).type_regime_ivas_id=a)},null,8,["items","modelValue"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"4"},{default:o(()=>[e(f,{maxlength:"50",label:"Indicativo",modelValue:l(s).indicative,"onUpdate:modelValue":t[25]||(t[25]=a=>l(s).indicative=a)},null,8,["modelValue"])]),_:1}),e(n,{cols:"8"},{default:o(()=>[e(f,{maxlength:"50",label:"# de telefono",onKeypress:t[26]||(t[26]=a=>l(L)(a)),modelValue:l(s).phone_fac,"onUpdate:modelValue":t[27]||(t[27]=a=>l(s).phone_fac=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[e(f,{maxlength:"50",label:"C\xF3digo postal",modelValue:l(s).postal_code,"onUpdate:modelValue":t[28]||(t[28]=a=>l(s).postal_code=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[be,ye,xe]),_:1})]),_:1}),e(i,null,{default:o(()=>[(y(!0),h(N,null,P(l(Z),(a,u)=>(y(),q(n,{cols:"12"},{default:o(()=>[e(X,{label:a.name+" "+a.description,"true-value":"Activo","false-value":"Inactivo",modelValue:a.estado,"onUpdate:modelValue":r=>a.estado=r,onClick:r=>l(V).addFiscalResponsability(a.id)},null,8,["label","modelValue","onUpdate:modelValue","onClick"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(n,{cols:"12"},{default:o(()=>[e(F,null,{default:o(()=>[e(O,null,{default:o(()=>[e(_,{icon:l($)?"mdi-chevron-up":"mdi-chevron-down",onClick:t[29]||(t[29]=a=>$.value=!l($))},null,8,["icon"]),e(_,{color:"orange-lighten-2",variant:"text",onClick:t[30]||(t[30]=a=>$.value=!l($))},{default:o(()=>[U(" Contactos ")]),_:1})]),_:1}),e(M,null,{default:o(()=>[I(g("div",null,[e(j),e(w,null,{default:o(()=>[e(i,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[e(_,{onClick:t[31]||(t[31]=a=>l(V).addFormContact())},{default:o(()=>[U("+ Agregar contacto")]),_:1})]),_:1}),e(n,{cols:"12"},{default:o(()=>[(y(!0),h(N,null,P(l(D),(a,u)=>I((y(),q(i,{key:u},{default:o(()=>[e(n,{cols:"2"},{default:o(()=>{var r;return[e(f,{modelValue:a.name,"onUpdate:modelValue":d=>a.name=d,maxlength:"50",label:"Nombre","error-messages":(r=l(m)[u])==null?void 0:r.name,rules:[l(v)],onKeypress:d=>l(m)[u].name=""},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"2"},{default:o(()=>{var r;return[e(f,{modelValue:a.last_name,"onUpdate:modelValue":d=>a.last_name=d,maxlength:"50",label:"Apellido","error-messages":(r=l(m)[u])==null?void 0:r.last_name,rules:[l(v)],onKeypress:d=>l(m)[u].last_name=""},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"2"},{default:o(()=>{var r;return[e(f,{modelValue:a.email,"onUpdate:modelValue":d=>a.email=d,maxlength:"50",label:"Correo electr\xF3nico","error-messages":(r=l(m)[u])==null?void 0:r.email,rules:[l(v),l(W)],onKeypress:d=>l(m)[u].email=""},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"2"},{default:o(()=>{var r;return[e(f,{modelValue:a.charge,"onUpdate:modelValue":d=>a.charge=d,maxlength:"50",label:"Cargo","error-messages":(r=l(m)[u])==null?void 0:r.charge,rules:[l(v)],onKeypress:d=>l(m)[u].charge=""},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"2"},{default:o(()=>{var r;return[e(f,{modelValue:a.indicative,"onUpdate:modelValue":d=>a.indicative=d,maxlength:"10",label:"Indicativo","error-messages":(r=l(m)[u])==null?void 0:r.indicative,rules:[l(v)],onKeypress:d=>l(m)[u].indicative=""},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"2"},{default:o(()=>{var r;return[e(f,{modelValue:a.phone,"onUpdate:modelValue":d=>a.phone=d,maxlength:"10",label:"# de Tel\xE9fono","error-messages":(r=l(m)[u])==null?void 0:r.phone,rules:[l(v)],onKeypress:d=>{l(m)[u].phone="",l(L)(d)}},null,8,["modelValue","onUpdate:modelValue","error-messages","rules","onKeypress"])]}),_:2},1024),e(n,{cols:"1"},{default:o(()=>[e(_,{size:"x-small",color:"error",variant:"text",onClick:r=>l(V).deleteFormContact(u,a)},{default:o(()=>[e(Q,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[A,a.delete!="delete"]])),128))]),_:1})]),_:1})]),_:1})],512),[[A,l($)]])]),_:1})]),_:1})]),_:1}),e(n,{cols:"12"},{default:o(()=>[e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(F,null,{default:o(()=>[e(O,null,{default:o(()=>[e(_,{icon:l(K)?"mdi-chevron-up":"mdi-chevron-down",onClick:t[32]||(t[32]=a=>K.value=!l(K))},null,8,["icon"]),e(_,{color:"orange-lighten-2",variant:"text",onClick:t[33]||(t[33]=a=>K.value=!l(K))},{default:o(()=>[U(" Vendedor y cobrador ")]),_:1})]),_:1}),e(M,null,{default:o(()=>[I(g("div",null,[e(j),e(w,null,{default:o(()=>[e(i,null,{default:o(()=>[e(n,{cols:"6"},{default:o(()=>[e(C,{items:l(H),"item-title":"name","item-value":"id",label:"Vendedor",modelValue:l(s).seller_id,"onUpdate:modelValue":t[34]||(t[34]=a=>l(s).seller_id=a)},null,8,["items","modelValue"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(C,{items:l(H),"item-title":"name","item-value":"id",label:"Cobrador",modelValue:l(s).debt_seller_id,"onUpdate:modelValue":t[35]||(t[35]=a=>l(s).debt_seller_id=a)},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1})],512),[[A,l(K)]])]),_:1})]),_:1})]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(F,null,{default:o(()=>[e(O,null,{default:o(()=>[e(_,{icon:l(E)?"mdi-chevron-up":"mdi-chevron-down",onClick:t[36]||(t[36]=a=>E.value=!l(E))},null,8,["icon"]),e(_,{color:"orange-lighten-2",variant:"text",onClick:t[37]||(t[37]=a=>E.value=!l(E))},{default:o(()=>[U(" Observaciones ")]),_:1})]),_:1}),e(M,null,{default:o(()=>[I(g("div",null,[e(j),e(w,null,{default:o(()=>[e(i,null,{default:o(()=>[e(f,{maxlength:"50",label:"Observaciones",modelValue:l(s).observations,"onUpdate:modelValue":t[38]||(t[38]=a=>l(s).observations=a)},null,8,["modelValue"])]),_:1})]),_:1})],512),[[A,l(E)]])]),_:1})]),_:1})]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(n,{cols:"12 d-flex justify-content-center"},{default:o(()=>[e(_,{color:"primary",onClick:t[39]||(t[39]=a=>se())},{default:o(()=>[U("Guardar")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]))}});export{De as _};
