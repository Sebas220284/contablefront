import{d as K,k as c,E as T,b9 as _,C as z,aB as A,o as C,c as R,p as l,w as o,m,z as u,q as e,b as q,H as E}from"./index.1bb36a93.js";import{u as P}from"./useCrudUserStore.0ff7b9dd.js";import{r as d,e as j,l as F,s as U}from"./validators.bb8f1929.js";import{u as L,V as M}from"./useImageUpload.49dcf1d8.js";import{a as i,V as y}from"./VRow.971cb494.js";import{V as x}from"./VBtn.22d55266.js";import{V as f}from"./VTextField.1b37a66e.js";import{V as D}from"./VSelect.ff4ebc03.js";import{V as G}from"./VForm.9a7f2cfe.js";const H={class:"col-md-6"},O=m("span",null," Tu plan tiene derecho a 3 usuarios con acceso gratis o gestores de n\xF3mina. A la fecha has creado 2 y a\xFAn tienes pendiente por crear 1. Los usuarios tipo lite (Cajero POS) son limitados y 1 gestor de n\xF3mina (administrador n\xF3mina). ",-1),J=m("br",null,null,-1),Q=m("br",null,null,-1),W={class:"col-md-6 d-flex justify-content-end"},te=K({__name:"Form",props:{userId:{type:Number,default:null,required:!1}},setup(N){const k=N,w=c(),I=T(),V=P(),{formulario:t,arrayRoles:$}=_(V),r=c([]),p=c(L()),v=c(!1),g=c([]),b=async n=>{var a;V.typeAction=n,g.value=[],r.value=[],p.value.clearData(),await((a=w.value)==null?void 0:a.resetValidation()),n!="back"&&V.keyList++},S=n=>{p.value.handleImageSelected(n)},B=async()=>{var a;t.value.company_id=I.company.id;const n=await((a=w.value)==null?void 0:a.validate());if(n!=null&&n.valid){p.value.imageFile&&(t.value.photo=p.value.imageFile);const s=await V.fetchSave();s.status===200&&b("list"),s.status===422&&(r.value=s.error)}};return z(t,(n,a)=>{n.id?g.value.password=[]:g.value.password=[d(n.password)]},{deep:!0}),A(async()=>{k.userId&&await V.fetchInfoUser(k.userId)}),(n,a)=>(C(),R("div",null,[l(y,null,{default:o(()=>[l(i,{cols:"12",class:""},{default:o(()=>[m("div",H,[O,J,m("span",null,[u("Consulta los usuarios creados en "),l(x,{size:"small",onClick:a[0]||(a[0]=s=>b("back"))},{default:o(()=>[u("Reporte usuarios creados ")]),_:1})]),Q,m("span",null,[u("Recuerda que adem\xE1s puedes invitar a tu contador "),l(x,{class:"mt-1",size:"small"},{default:o(()=>[u("Invita a tu contador ")]),_:1})])]),m("div",W,[l(x,{color:"secondary",onClick:a[1]||(a[1]=s=>b("back"))},{default:o(()=>[u(" Atras ")]),_:1})])]),_:1})]),_:1}),l(G,{ref_key:"formValidation",ref:w,"lazy-validation":""},{default:o(()=>[l(y,null,{default:o(()=>[l(i,{cols:"4"},{default:o(()=>[l(f,{rules:[e(d),e(j)],modelValue:e(t).email,"onUpdate:modelValue":a[2]||(a[2]=s=>e(t).email=s),autocomplete:"off","error-messages":e(r).email,label:"Email",onKeypress:a[3]||(a[3]=s=>e(r).email="")},null,8,["rules","modelValue","error-messages"])]),_:1}),l(i,{cols:"4"},{default:o(()=>[l(f,{rules:e(g).password,autocomplete:"off","onClick:append":a[4]||(a[4]=s=>v.value=!e(v)),type:e(v)?"text":"password","append-icon":e(v)?"mdi-eye":"mdi-eye-off",modelValue:e(t).password,"onUpdate:modelValue":a[5]||(a[5]=s=>e(t).password=s),"error-messages":e(r).password,label:"Contrase\xF1a",onKeypress:a[6]||(a[6]=s=>e(r).password="")},null,8,["rules","type","append-icon","modelValue","error-messages"])]),_:1}),l(i,{cols:"4"},{default:o(()=>[l(f,{rules:[e(d)],modelValue:e(t).name,"onUpdate:modelValue":a[7]||(a[7]=s=>e(t).name=s),"error-messages":e(r).name,label:"Nombre",onKeypress:a[8]||(a[8]=s=>e(r).name="")},null,8,["rules","modelValue","error-messages"])]),_:1}),l(i,{cols:"4"},{default:o(()=>[l(f,{rules:[e(d)],modelValue:e(t).lastName,"onUpdate:modelValue":a[9]||(a[9]=s=>e(t).lastName=s),"error-messages":e(r).lastName,label:"Apellido",onKeypress:a[10]||(a[10]=s=>e(r).lastName="")},null,8,["rules","modelValue","error-messages"])]),_:1}),l(i,{cols:"4"},{default:o(()=>[l(D,{rules:[e(d)],items:e($),modelValue:e(t).role_id,"onUpdate:modelValue":[a[11]||(a[11]=s=>e(t).role_id=s),a[12]||(a[12]=s=>e(r).role_id="")],"item-title":"name","item-value":"id",label:"Tipo de usuario","error-messages":e(r).role_id},null,8,["rules","items","modelValue","error-messages"])]),_:1}),l(i,{cols:"4"},{default:o(()=>[l(f,{maxlength:"10",rules:[e(d),e(F)(e(t).identification,10)],modelValue:e(t).identification,"onUpdate:modelValue":a[13]||(a[13]=s=>e(t).identification=s),"error-messages":e(r).identification,label:"identificaci\xF3n",onKeypress:a[14]||(a[14]=s=>{e(r).identification="",e(U)(s)})},null,8,["rules","modelValue","error-messages"])]),_:1})]),_:1}),l(y,null,{default:o(()=>[l(i,{cols:"4"},{default:o(()=>[l(f,{maxlength:"15",rules:[e(d),e(F)(e(t).phone,15)],modelValue:e(t).phone,"onUpdate:modelValue":a[15]||(a[15]=s=>e(t).phone=s),"error-messages":e(r).phone,label:"Telefono",onKeypress:a[16]||(a[16]=s=>{e(r).phone="",e(U)(s)})},null,8,["rules","modelValue","error-messages"])]),_:1}),l(i,{cols:"4"},{default:o(()=>[(C(),q(M,{"show-size":"",counter:"",label:"Photo",accept:"image/*",onChange:a[17]||(a[17]=s=>S(s)),key:e(p).key},{default:o(()=>[u(" /> ")]),_:1}))]),_:1}),l(i,{cols:"12"},{default:o(()=>{var s;return[l(E,{contain:"",src:(s=e(p).imageUrl)!=null?s:e(t).photo,alt:"foto Personal","max-width":200,class:"mx-auto"},null,8,["src"])]}),_:1})]),_:1}),l(y,null,{default:o(()=>[l(i,{cols:"12 d-flex justify-content-center"},{default:o(()=>[l(x,{color:"primary",onClick:a[18]||(a[18]=s=>B())},{default:o(()=>[u("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},512)]))}});export{te as _};
