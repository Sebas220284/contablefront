import{d as E,E as L,t as Q,b9 as R,k as v,aB as q,C as B,bm as K,O,o as f,c as V,p as a,w as u,m as e,q as s,bi as w,z as G,s as H,bK as J,b as S,V as g,I as W,a2 as _,a3 as y,F as X,a as Y,x as D}from"./index.1bb36a93.js";import{S as Z}from"./sweetalert2.74fe64d4.js";import{u as ee}from"./useCrudChargeCatalogStore.cf4c056c.js";import{_ as te}from"./PreloadInterno.vue_vue_type_script_setup_true_lang.45fe2ba0.js";import{V as ae}from"./VSelect.ff4ebc03.js";import{V as se}from"./VSpacer.c965114a.js";import{V as oe}from"./VTextField.1b37a66e.js";import{V as C}from"./VBtn.22d55266.js";import{V as T}from"./VContainer.fea237fc.js";import{V as $}from"./VDivider.5fbe829f.js";import{V as le}from"./VTable.ef7fd960.js";import{V as ne}from"./VPagination.37591e70.js";const re={class:"me-3",style:{width:"80px"}},ie={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ce={style:{width:"10rem"}},de={class:"w10"},ue=e("span",{class:"ml-2"},"Cargo",-1),me=e("th",{scope:"col"}," Acciones ",-1),fe={style:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},pe={colspan:"2"},he={class:"text-center",style:{width:"5rem"}},ve=e("tr",null,[e("td",{colspan:"7",class:"text-center"}," No se encuentran resultados ")],-1),ge=[ve],_e={class:"text-sm text-disabled"},Ae=E({__name:"TableList",setup(ye){const z=L(),{theme:A}=Q(),r=ee(),{chargeCatalogs:p,totalPage:h,lastPage:P,currentPage:o,totalData:N,loading:b}=R(r),i=v(10),m=v(""),c=v("desc"),d=v("name"),F=async n=>{d.value==n?c.value=c.value=="asc"?"desc":"asc":d.value=n},x=async()=>{await r.fetchAll({company_id:z.company.id,perPage:i.value,page:o.value,searchQuery:m.value,sort_direction:c.value,sort_field:d.value})};q(async()=>{r.typeAction!="back"&&await x()}),B(o,async()=>{o.value>h.value&&(o.value=h.value)}),B(i,async()=>{o.value=1}),K([o,m,i,c,d],async()=>{await x()});const I=O(()=>{const n=p.value.length?(o.value-1)*h.value+1:0,t=p.value.length+(o.value-1)*h.value;return`Mostrando ${n} a ${t} de ${N.value} registros`}),k=async(n,t=null)=>{r.clearFormulario(),r.typeAction=n,t&&r.fetchInfo(t)},M=async n=>{Z.fire({title:"\xBFDesea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await r.fetchDelete(n),await x()):t.isDenied})};return(n,t)=>(f(),V("div",null,[a(T,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:u(()=>[e("div",re,[a(ae,{modelValue:s(i),"onUpdate:modelValue":t[0]||(t[0]=l=>w(i)?i.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(se),e("div",ie,[e("div",ce,[a(oe,{modelValue:s(m),"onUpdate:modelValue":t[1]||(t[1]=l=>w(m)?m.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),a(C,{color:"primary",onClick:t[2]||(t[2]=l=>k("form"))},{default:u(()=>[G(" Agregar ")]),_:1})])]),_:1}),a($),a(le,{class:"text-no-wrap"},{default:u(()=>[e("thead",null,[e("tr",null,[e("th",de,[e("a",{href:"#",class:H(s(A)=="dark"?"text-white":"text-primary"),onClick:t[3]||(t[3]=J(l=>F("name"),["prevent"]))},[s(c)=="desc"&&s(d)=="name"?(f(),S(g,{key:0,icon:"mdi-arrow-up-bold"})):s(c)=="asc"&&s(d)=="name"?(f(),S(g,{key:1,icon:"mdi-arrow-down-bold"})):W("",!0),ue],2)]),me])]),_(e("div",fe,null,512),[[y,!0]]),e("tbody",null,[_(e("tr",null,[e("td",pe,[a(te)])],512),[[y,s(b)]]),(f(!0),V(X,null,Y(s(p),(l,U)=>_((f(),V("tr",{key:U,style:{height:"3.75rem"}},[e("td",null,[e("span",null,D(l.name),1)]),e("td",he,[a(C,{size:"x-small",color:"error",variant:"text",onClick:j=>M(l.id)},{default:u(()=>[a(g,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(C,{icon:"",size:"x-small",color:"default",variant:"text",onClick:j=>k("form",l.id)},{default:u(()=>[a(g,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[y,!s(b)]])),128))]),_(e("tfoot",null,ge,512),[[y,!s(p).length]])]),_:1}),a($),a(T,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:u(()=>[e("span",_e,D(s(I)),1),a(ne,{modelValue:s(o),"onUpdate:modelValue":t[4]||(t[4]=l=>w(o)?o.value=l:null),size:"small","total-visible":5,length:s(P)},null,8,["modelValue","length"])]),_:1})]))}});export{Ae as _};
