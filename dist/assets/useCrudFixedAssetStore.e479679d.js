import{bo as c,bg as e,bp as o,bq as l}from"./index.1bb36a93.js";import{S as f}from"./sweetalert2.74fe64d4.js";const i=l(),h=c("useCrudFixedAssetStore",{state:()=>({loading:!1,typeAction:"list",fixedAssetData:{},keyList:0,fixedAssets:[],totalData:0,totalPage:0,currentPage:1,ledgerAccountGroup:[],lastPage:0,formulario:{id:null,code:null,name:null,fixed_asset_group_id:null},fixedAssetGroupsList:[],fixedAssetGroupsCountLinks:0}),getters:{},actions:{clearFormulario(){this.formulario={id:null,code:null,name:null,fixed_asset_group_id:null}},clonarForm(){for(const s in this.formulario)this.fixedAssetData[s]=this.formulario[s]},async fetchAll(s){this.loading=!0,await e.post("fixedAsset-list",s).then(a=>{this.loading=!1,this.fixedAssets=a.data.fixedAssets,this.totalData=a.data.totalData,this.totalPage=a.data.totalPage,this.currentPage=a.data.currentPage,this.lastPage=a.data.lastPage}).catch(async a=>{this.loading=!1,console.log(await a)})},async fetchSave(){const s=o();return s.isLoading=!0,await await e.post("fixedAsset-create",this.formulario).then(t=>(s.isLoading=!1,t.data.code===200&&(this.clonarForm(),this.clearFormulario(),i.toast("\xC9xito",t.data.message,"success")),t.data.code===500&&i.toast("Error",t.data.message,"danger"),t.data.status===422?(i.toast("Error",t.data.message,"danger"),{error:t.data.errors,status:t.data.status}):{status:t.data.code})).catch(async t=>(s.isLoading=!1,t.response.status===500&&i.toast("Error",t.response.data.message,"danger"),console.log(await t),t.response.status))},async fetchDelete(s){const a=o();a.isLoading=!0,await e.delete("fixedAsset-delete/"+s).then(t=>{a.isLoading=!1,i.toast("\xC9xito",t.data.message,"success")}).catch(async t=>{a.isLoading=!1,console.log(await t)})},async fetchInfo(s){const a=o();if(s!==this.fixedAssetData.id)a.isLoading=!0,await e.get(`fixedAsset-info/${s}`).then(async t=>{a.isLoading=!1,this.fixedAssetData.id=s,this.formulario=await t.data.data,this.clonarForm()}).catch(async t=>{a.isLoading=!1,console.log(await t)});else for(const t in this.fixedAssetData)this.formulario[t]=this.fixedAssetData[t]},async fetchDataForm(s){const a=o();a.isLoading=!0,await e.post("fixedAsset-dataForm",s).then(t=>{a.isLoading=!1,this.fixedAssetGroupsList=t.data.fixedAssetGroups_arrayInfo,this.fixedAssetGroupsCountLinks=t.data.fixedAssetGroups_countLinks}).catch(async t=>{a.isLoading=!1,console.log(await t)})},changeState(s,a){const t=o();let n="";a==0?n="activar":n="inactivar",f.fire({title:"\xBFEst\xE1 seguro de "+n+" el Registro seleccionado?",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No",allowOutsideClick:!1}).then(r=>{r.isConfirmed?(t.isLoading=!0,e.post("fixedAsset-changeState",s).then(d=>{t.isLoading=!1,d.data.code==200&&i.toast("\xC9xito",d.data.msg,"success"),d.data.code==500&&i.toast("\xC9xito",d.data.msg,"danger")})):n=="activar"?s.state=0:s.state=1})},async fetchSelect2FixedAsset(s){return this.loading=!0,await e.post("fixedAsset-select2InfiniteList",s).then(t=>(this.loading=!1,this.fixedAssetGroupsList=t.data.fixedAssetGroups_arrayInfo)).catch(async t=>(this.loading=!1,console.log(await t),0))}}});export{h as u};
