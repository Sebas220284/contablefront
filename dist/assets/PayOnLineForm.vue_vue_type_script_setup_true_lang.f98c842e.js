import{d as F,E as M,b9 as z,k as N,aB as D,r as E,o as C,c as w,p as t,w as l,z as v,q as e,m as y,a2 as S,aN as B,a3 as I,V,I as P}from"./index.1bb36a93.js";import{u as q}from"./useWayToPayPayOnLineStore.3f30e69d.js";import{r as g,l as R}from"./validators.bb8f1929.js";import{u as T}from"./useSelect2Infite.14981200.js";import{a as m,V as _}from"./VRow.971cb494.js";import{V as d}from"./VBtn.22d55266.js";import{V as x}from"./VTextField.1b37a66e.js";import{V as L}from"./VSelect.ff4ebc03.js";import{V as b}from"./VDivider.5fbe829f.js";import{V as K}from"./VForm.9a7f2cfe.js";const O={class:"d-flex justify-content-center aling-items-center"},W={key:0,class:"d-flex justify-content-between aling-items-center p-2"},G={class:"d-flex justify-content-center aling-items-center"},H={key:0,class:"d-flex justify-content-between aling-items-center p-2"},ne=F({__name:"PayOnLineForm",setup(J){const A=M(),c=q(),{formulario:s,paymentMethods:U,relatedTos:j,ledgerAccountAuxiliar:Q,loading:f}=z(c),r=T(c.fetchLedgerAccountAuxiliaryList,Q,{company_id:A.company.id}),n=T(c.fetchLedgerPaymentMethodsList,U,{}),i=N([]),k=N(),$=async u=>{var a;await((a=k.value)==null?void 0:a.resetValidation()),i.value=[],r.searchQuery.value="",n.searchQuery.value="",c.typeAction=u,u!="back"&&c.keyList++},h=async()=>{var a;const u=await((a=k.value)==null?void 0:a.validate());if(u!=null&&u.valid){s.value.company_id=A.company.id;const p=await c.fetchSave();p.status===200&&$("list"),p.status===422&&(i.value=p.error)}};return D(async()=>{await r.search(),await n.search()}),(u,a)=>{const p=E("RouterLink");return C(),w("div",null,[t(_,null,{default:l(()=>[t(m,{cols:"12",class:"d-flex justify-content-end"},{default:l(()=>[t(d,{color:"secondary",onClick:a[0]||(a[0]=o=>$("back"))},{default:l(()=>[v(" Atras ")]),_:1})]),_:1})]),_:1}),t(K,{ref_key:"formValidation",ref:k,"lazy-validation":""},{default:l(()=>[t(_,null,{default:l(()=>[t(m,{cols:"3"},{default:l(()=>[t(x,{maxlength:"20",rules:[e(g),e(R)(e(s).code,20)],modelValue:e(s).code,"onUpdate:modelValue":a[1]||(a[1]=o=>e(s).code=o),"error-messages":e(i).code,label:"Codigo",onKeypress:a[2]||(a[2]=o=>{e(i).code=""})},null,8,["rules","modelValue","error-messages"])]),_:1}),t(m,{cols:"4"},{default:l(()=>[t(x,{maxlength:"50",rules:[e(g),e(R)(e(s).name,50)],modelValue:e(s).name,"onUpdate:modelValue":a[3]||(a[3]=o=>e(s).name=o),"error-messages":e(i).name,label:"Nombre",onKeypress:a[4]||(a[4]=o=>e(i).name="")},null,8,["rules","modelValue","error-messages"])]),_:1}),t(m,{cols:"5"},{default:l(()=>[t(L,{disabled:"",items:e(j),modelValue:e(s).related_to_id,"onUpdate:modelValue":a[5]||(a[5]=o=>e(s).related_to_id=o),"item-title":"name","item-value":"id",label:"Relacionado con"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(_,{class:"mt-3"},{default:l(()=>[t(m,{cols:"6"},{default:l(()=>[t(L,{rules:[e(g)],label:"Cuenta contable","onUpdate:modelValue":[a[9]||(a[9]=o=>e(i).ledger_account_auxiliary_id=""),a[10]||(a[10]=o=>e(s).ledger_account_auxiliary_id=o)],"error-messages":e(i).ledger_account_auxiliary_id,"item-title":"name","item-value":"id",modelValue:e(s).ledger_account_auxiliary_id,items:e(r).dataNueva.value},{"prepend-item":l(()=>[t(x,{placeholder:"Buscar...",class:"mb-2",modelValue:e(r).searchQuery.value,"onUpdate:modelValue":a[6]||(a[6]=o=>e(r).searchQuery.value=o)},null,8,["modelValue"]),t(b)]),"append-item":l(()=>[t(b),y("div",O,[S(t(B,{size:"24",color:"primary",indeterminate:""},null,512),[[I,e(f)]])]),e(f)?P("",!0):(C(),w("div",W,[t(p,{to:{name:"Admin-LedgerAccount-Index"},class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},{default:l(()=>[t(d,{color:"success"},{default:l(()=>[v("Crear Registro")]),_:1})]),_:1}),y("div",null,[t(d,{class:"mt-2",disabled:e(r).page.value<=1,onClick:a[7]||(a[7]=o=>e(r).prev()),color:"success"},{default:l(()=>[t(V,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),t(d,{class:"mt-2",disabled:e(r).page.value>=e(r).totalLinks.value,onClick:a[8]||(a[8]=o=>e(r).next()),color:"success"},{default:l(()=>[t(V,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:1},8,["rules","error-messages","modelValue","items"])]),_:1}),t(m,{cols:"6"},{default:l(()=>[t(L,{rules:[e(g)],label:"Medio de pago D.Electr\xF3nico","onUpdate:modelValue":[a[14]||(a[14]=o=>e(i).payment_method_id=""),a[15]||(a[15]=o=>e(s).payment_method_id=o)],"error-messages":e(i).payment_method_id,"item-title":"name","item-value":"id",modelValue:e(s).payment_method_id,items:e(n).dataNueva.value},{"prepend-item":l(()=>[t(x,{placeholder:"Buscar...",class:"mb-2",modelValue:e(n).searchQuery.value,"onUpdate:modelValue":a[11]||(a[11]=o=>e(n).searchQuery.value=o)},null,8,["modelValue"]),t(b)]),"append-item":l(()=>[t(b),y("div",G,[S(t(B,{size:"24",color:"primary",indeterminate:""},null,512),[[I,e(f)]])]),e(f)?P("",!0):(C(),w("div",H,[t(p,{to:{name:"Admin-LedgerAccount-Index"},class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},{default:l(()=>[t(d,{color:"success"},{default:l(()=>[v("Crear Registro")]),_:1})]),_:1}),y("div",null,[t(d,{class:"mt-2",disabled:e(n).page.value<=1,onClick:a[12]||(a[12]=o=>e(n).prev()),color:"success"},{default:l(()=>[t(V,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),t(d,{class:"mt-2",disabled:e(n).page.value>=e(n).totalLinks.value,onClick:a[13]||(a[13]=o=>e(n).next()),color:"success"},{default:l(()=>[t(V,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:1},8,["rules","error-messages","modelValue","items"])]),_:1})]),_:1}),t(_,null,{default:l(()=>[t(m,{cols:"12 d-flex justify-content-center"},{default:l(()=>[t(d,{color:"primary",onClick:a[16]||(a[16]=o=>h())},{default:l(()=>[v("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},512)])}}});export{ne as _};
