import{d as $,E as G,k as h,b9 as L,C as H,aB as J,o as V,c as k,p as e,w as l,z as S,q as a,F as N,a as j,b as w,m as n,x as K,a2 as Q,ba as W,H as X,bF as Y,a3 as Z,V as g,U as x}from"./index.1bb36a93.js";import{u as ee}from"./useCrudProductStore.e1796e7b.js";import{r as d,l as p,v as le}from"./validators.bb8f1929.js";import{u as ae,V as oe}from"./useImageUpload.49dcf1d8.js";import{S as te}from"./sweetalert2.74fe64d4.js";import{a as u,V as r}from"./VRow.971cb494.js";import{V as D}from"./VBtn.22d55266.js";import{V as _}from"./VDivider.5fbe829f.js";import{V as E,a as C}from"./VRadioGroup.dd1ceab0.js";import{V as se}from"./VSpacer.c965114a.js";import{V as f}from"./VTextField.1b37a66e.js";import{V as b}from"./VTooltip.80e9232f.js";import{V as U}from"./VSelect.ff4ebc03.js";import{V as ue}from"./VTextarea.43ed9da5.js";import{V as re}from"./VForm.9a7f2cfe.js";const de=n("b",null,"Tipo",-1),ne={class:"d-flex flex-column"},ie=n("b",null,"Im\xE1genes",-1),me=n("label",{for:""},"Adjuntar im\xE1genes (m\xE1ximo 5 de 500px de ancho por 375px de alto)",-1),ce=n("b",null,"Datos b\xE1sicos",-1),fe=n("span",null,"Preguntar???. ",-1),pe=n("label",{for:""},"\xBFEl IVA est\xE1 incluido en el precio de venta?",-1),_e=n("span",null,"IVA inclu\xEDdo en el total de las facturas. ",-1),Ve=n("b",null,"Detalle del producto",-1),ge=n("span",null,"Valores entregados por la DIAN, la respectiva unidad de medida. ",-1),xe=n("b",null,"Descripci\xF3n larga",-1),be=n("b",null,"Informaci\xF3n tributaria",-1),ve=n("label",null,"\xBFEl valor aplica para el impuesto al consumo de bolsas?",-1),ye=n("b",null,"Datyos adicionales",-1),Ce=n("span",null,"Datos de los productos para aquellas empresas que manejan factura de exportaci\xF3n. ",-1),Ue=n("span",null,"Datos de los productos para aquellas empresas que manejan factura de exportaci\xF3n. ",-1),Fe=n("span",null,"Datos de los productos para aquellas empresas que manejan factura de exportaci\xF3n. ",-1),Oe=$({__name:"Form",setup(Ie){const M=G(),F=h(),c=h([]),v=ee(),{formulario:s,arrayImages:y,typeProducts:B,taxCharges:R,withholdingTaxes:q,taxClassifications:A}=L(v),m=h(ae());m.value.allowedExtensions=["png","jpg","jpeg"];const T=async i=>{var t;await((t=F.value)==null?void 0:t.resetValidation()),c.value=[],v.typeAction=i,i!="back"&&v.keyList++};H(m.value,async()=>{var i;m.value.imageUrl&&y.value.length<5&&(y.value.push({id:null,imageFile:m.value.imageFile,imageUrl:(i=m.value.imageUrl)!=null?i:null,delete:null}),m.value.imageFile=null,m.value.imageUrl=null,m.value.key++),y.value.length==5&&(te.fire("Informaci\xF3n","Solo se permiten 5 imagenes m\xE1ximo","info"),m.value.imageFile=null,m.value.imageUrl=null,m.value.key++)});const P=async(i,t)=>{t.id?t.delete=1:y.value.splice(i,1)},O=async()=>{var t;const i=await((t=F.value)==null?void 0:t.validate());if(s.value.company_id=M.company.id,console.log("validation?.valid",i==null?void 0:i.valid),i!=null&&i.valid){const o=await v.fetchSave();o.status===200&&T("list"),o.status===422&&(c.value=o.error)}};return J(()=>{v.fetchDataForm(M.company.id)}),(i,t)=>(V(),k("div",null,[e(r,null,{default:l(()=>[e(u,{cols:"12",class:"d-flex justify-content-end"},{default:l(()=>[e(D,{color:"secondary",onClick:t[0]||(t[0]=o=>T("back"))},{default:l(()=>[S(" Atras ")]),_:1})]),_:1})]),_:1}),e(re,{ref_key:"formValidation",ref:F,"lazy-validation":""},{default:l(()=>[e(_,{class:"my-5"}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[de]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(E,{rules:[a(d)],inline:"",modelValue:a(s).typeProduct_id,"onUpdate:modelValue":t[1]||(t[1]=o=>a(s).typeProduct_id=o)},{default:l(()=>[(V(!0),k(N,null,j(a(B),(o,I)=>(V(),w(u,{cols:"4"},{default:l(()=>[n("div",ne,[e(C,{label:o.name,value:o.id},null,8,["label","value"]),n("span",null,K(o.description),1)])]),_:2},1024))),256))]),_:1},8,["rules","modelValue"])]),_:1})]),_:1}),e(_,{class:"my-5"}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[ie]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[me]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"4"},{default:l(()=>[(V(),w(oe,{id:"imagen","show-size":"",counter:"",label:"Imagen",onChange:a(m).handleImageSelected,"error-messages":a(c).imagen,accept:"image/*",key:a(m).key},{default:l(()=>[S(" /> ")]),_:1},8,["onChange","error-messages"]))]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(r,null,{default:l(()=>[(V(!0),k(N,null,j(a(y),(o,I)=>(V(),w(u,{cols:"12",sm:"4",md:"2",class:"d-flex child-flex justify-content-center align-items-center",key:I},{default:l(()=>[Q(e(W,{width:"200px"},{default:l(()=>{var z;return[e(X,{"aspect-ratio":"1",class:"bg-grey-lighten-2",src:(z=o.imageUrl)!=null?z:o.path,alt:"foto Personal"},null,8,["src"]),e(Y,{class:"mt-2"},{default:l(()=>[e(se),e(D,{size:"small",color:"error",onClick:he=>P(I,o),variant:"text",icon:"tabler-trash"},null,8,["onClick"])]),_:2},1024)]}),_:2},1536),[[Z,!o.delete]])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(_,{class:"my-5"}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[ce]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"11"},{default:l(()=>[e(f,{"error-messages":a(c).code,type:"text",label:"Codigo *",maxlength:"30",clearable:"",rules:[a(d),a(p)(a(s).code,30)],modelValue:a(s).code,"onUpdate:modelValue":t[2]||(t[2]=o=>a(s).code=o)},null,8,["error-messages","rules","modelValue"])]),_:1}),e(u,{cols:"1"},{default:l(()=>[e(b,{location:"top"},{activator:l(({props:o})=>[e(g,x({color:"primary"},o,{size:"30",icon:"mdi-help-circle"}),null,16)]),default:l(()=>[fe]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[pe,e(b,{location:"top"},{activator:l(({props:o})=>[e(g,x({color:"primary"},o,{size:"30",icon:"mdi-help-circle"}),null,16)]),default:l(()=>[_e]),_:1}),e(E,{modelValue:a(s).ivaIncluded,"onUpdate:modelValue":t[3]||(t[3]=o=>a(s).ivaIncluded=o),inline:"",rules:[a(d)]},{default:l(()=>[e(C,{label:"Si",value:"Si"}),e(C,{label:"No",value:"No"})]),_:1},8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).name,"onUpdate:modelValue":t[4]||(t[4]=o=>a(s).name=o),label:"Nombre del producto / servicio *",rules:[a(d)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).price,"onUpdate:modelValue":t[5]||(t[5]=o=>a(s).price=o),label:"Precio de venta 1",rules:[a(d)]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(U,{clearable:"",label:"Impuesto Cargo",modelValue:a(s).taxCharge_id,"onUpdate:modelValue":t[6]||(t[6]=o=>a(s).taxCharge_id=o),"item-value":"id","item-title":"name",items:a(R),rules:[a(d)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),e(_,{class:"my-5"}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[Ve]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"11"},{default:l(()=>[e(U,{clearable:"",label:"Unidad de medida factura electronica",modelValue:a(s).unitOfMeasurement_id,"onUpdate:modelValue":t[7]||(t[7]=o=>a(s).unitOfMeasurement_id=o),"item-value":"id","item-title":"name",items:[1,2,3,4,5],rules:[a(d)]},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"1"},{default:l(()=>[e(b,{location:"top"},{activator:l(({props:o})=>[e(g,x({color:"primary"},o,{size:"30",icon:"mdi-help-circle"}),null,16)]),default:l(()=>[ge]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).unitOfMeasurement,"onUpdate:modelValue":t[8]||(t[8]=o=>a(s).unitOfMeasurement=o),"error-messages":a(c).unitOfMeasurement,maxlength:"50",rules:[a(d),a(p)(a(s).unitOfMeasurement,50)],label:"Unidad de medida impresi\xF3n factura"},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).factoryReference,"onUpdate:modelValue":t[9]||(t[9]=o=>a(s).factoryReference=o),label:"Referencia de f\xE1brica","error-messages":a(c).factoryReference,maxlength:"80",rules:[a(d),a(p)(a(s).factoryReference,80)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).barcode,"onUpdate:modelValue":t[10]||(t[10]=o=>a(s).barcode=o),label:"C\xF3digo de barras","error-messages":a(c).barcode,maxlength:"50",rules:[a(d),a(p)(a(s).barcode,50)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),e(_,{class:"my-5"}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[xe]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(ue,{modelValue:a(s).description,"onUpdate:modelValue":t[11]||(t[11]=o=>a(s).description=o),rules:[a(d)]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(_,{class:"my-5"}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[be]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(U,{clearable:"",label:"Clasificaci\xF3n tributaria",modelValue:a(s).taxClassification_id,"onUpdate:modelValue":t[12]||(t[12]=o=>a(s).taxClassification_id=o),"item-value":"id","item-title":"name",items:a(A),rules:[a(d)]},null,8,["modelValue","items","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(U,{clearable:"",label:"Impuestos retenidos",modelValue:a(s).withholdingTaxes_id,"onUpdate:modelValue":t[13]||(t[13]=o=>a(s).withholdingTaxes_id=o),"item-value":"id","item-title":"name",items:a(q),rules:[a(d)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).valueInpoconsumo,"onUpdate:modelValue":t[14]||(t[14]=o=>a(s).valueInpoconsumo=o),onBlur:t[15]||(t[15]=o=>a(s).valueInpoconsumo=a(le)(a(s).valueInpoconsumo)),label:"Valor inpoconsumo",rules:[a(d)]},null,8,["modelValue","rules"])]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[ve,e(E,{modelValue:a(s).applyConsumptionTax,"onUpdate:modelValue":t[16]||(t[16]=o=>a(s).applyConsumptionTax=o),inline:"",rules:[a(d)]},{default:l(()=>[e(C,{label:"Si",value:"Si"}),e(C,{label:"No",value:"No"})]),_:1},8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(_,{class:"my-5"}),e(r,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[ye]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"11"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).model,"onUpdate:modelValue":t[17]||(t[17]=o=>a(s).model=o),label:"Modelo","error-messages":a(c).model,maxlength:"50",rules:[a(d),a(p)(a(s).model,100)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(u,{cols:"1"},{default:l(()=>[e(b,{location:"top"},{activator:l(({props:o})=>[e(g,x({color:"primary"},o,{size:"30",icon:"mdi-help-circle"}),null,16)]),default:l(()=>[Ce]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"11"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).tariffCode,"onUpdate:modelValue":t[18]||(t[18]=o=>a(s).tariffCode=o),label:"C\xF3digo arancelario","error-messages":a(c).tariffCode,maxlength:"10",rules:[a(d),a(p)(a(s).tariffCode,10)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(u,{cols:"1"},{default:l(()=>[e(b,{location:"top"},{activator:l(({props:o})=>[e(g,x({color:"primary"},o,{size:"30",icon:"mdi-help-circle"}),null,16)]),default:l(()=>[Ue]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"11"},{default:l(()=>[e(f,{clearable:"",type:"text",modelValue:a(s).mark,"onUpdate:modelValue":t[19]||(t[19]=o=>a(s).mark=o),label:"Marca","error-messages":a(c).mark,maxlength:"50",rules:[a(d),a(p)(a(s).mark,50)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(u,{cols:"1"},{default:l(()=>[e(b,{location:"top"},{activator:l(({props:o})=>[e(g,x({color:"primary"},o,{size:"30",icon:"mdi-help-circle"}),null,16)]),default:l(()=>[Fe]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,{cols:"12 d-flex justify-content-center"},{default:l(()=>[e(D,{color:"primary",onClick:t[20]||(t[20]=o=>O())},{default:l(()=>[S("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},512)]))}});export{Oe as _};
