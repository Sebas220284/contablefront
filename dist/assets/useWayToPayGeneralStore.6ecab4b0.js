import{bo as d,bg as s,bp as r,bq as c}from"./index.1bb36a93.js";import{S as g}from"./sweetalert2.74fe64d4.js";const i=c(),f=d("useWayToPayGeneralStore",{state:()=>({loading:!1,typeAction:"list",generals:[],paymentMethods:[],relatedTos:[],ledgerAccountAuxiliar:[],generalData:{},keyList:0,totalData:0,totalPage:0,currentPage:1,lastPage:0,routeName:"",formulario:{company_id:null,code:null,name:"",related_to_id:null,ledger_account_auxiliary_id:null,payment_method_id:null}}),getters:{},actions:{clearFormulario(){this.formulario={company_id:null,code:null,name:"",related_to_id:null,ledger_account_auxiliary_id:null,payment_method_id:null}},async fetchAll(t){this.loading=!0,await s.post("/general-list",t).then(e=>{this.loading=!1,this.generals=e.data.generals,this.paymentMethods=e.data.paymentMethod,this.relatedTos=e.data.relatedTo,this.ledgerAccountAuxiliar=e.data.ledgerAccountAuxiliar,this.totalData=e.data.totalData,this.totalPage=e.data.totalPage,this.currentPage=e.data.currentPage,this.lastPage=e.data.lastPage}).catch(async e=>{this.loading=!0,console.log(await e)})},async fetchSave(){const t=r();return t.isLoading=!0,await await s.post("/general-create",this.formulario).then(a=>(t.isLoading=!1,a.data.code===200&&i.toast("\xC9xito",a.data.message,"success"),a.data.code===500&&i.toast("Error",a.data.message,"danger"),a.data.status===422?(i.toast("Error",a.data.message,"danger"),{error:a.data.errors,status:a.data.status}):{status:a.data.code,formedit:a.data.data})).catch(async a=>(t.isLoading=!1,console.log("datadata",a.response),a.response.status))},clonarForm(){for(const t in this.formulario)this.generalData[t]=this.formulario[t]},async fetchInfoGeneral(t){const e=r();e.isLoading=!0,await s.get(`/general-info/${t}`).then(async a=>{e.isLoading=!1,this.formulario=await a.data.data,this.clonarForm(),this.generalData.id=t}).catch(async a=>{e.isLoading=!1,console.log(await a)})},changeState(t,e){const a=r();let o="";e==0?o="activar":o="inactivar",g.fire({title:"\xBFEst\xE1 seguro de "+o+" el Registro seleccionado?",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No",allowOutsideClick:!1}).then(l=>{l.isConfirmed?(a.isLoading=!0,s.post("/general-changeState",t).then(n=>{a.isLoading=!1,n.data.code==200&&i.toast("\xC9xito",n.data.msg,"success"),n.data.code==500&&i.toast("\xC9xito",n.data.msg,"error")})):o=="activar"?t.in_use=0:t.in_use=1})},async fetchLedgerAccountAuxiliaryList(t){return this.loading=!0,await s.post("/ledgerAccount-auxiliary-list",t).then(a=>{var o;return this.loading=!1,this.ledgerAccountAuxiliar=a.data.ledgerAccountAuxiliar,((o=a.data.data)==null?void 0:o.links.length)-2}).catch(async a=>(this.loading=!1,console.log(await a),0))},async fetchLedgerPaymentMethodsList(t){return this.loading=!0,await s.post("/paymentMethods-list",t).then(a=>(this.loading=!1,this.paymentMethods=a.data.paymentMethods)).catch(async a=>{this.loading=!1,console.log(await a)})}}});export{f as u};
