import{d as I,E as R,k,b9 as j,aB as D,r as U,o as C,c as A,p as t,w as s,z as V,q as e,m as w,a2 as z,aN as T,a3 as q,V as F,I as E}from"./index.1bb36a93.js";import{u as K}from"./useCrudFixedAssetStore.e479679d.js";import{r as g,l as S,i as M}from"./validators.bb8f1929.js";import{u as Q}from"./useSelect2Infite.14981200.js";import{a as m,V as x}from"./VRow.971cb494.js";import{V as c}from"./VBtn.22d55266.js";import{V as P}from"./VSelect.ff4ebc03.js";import{V as _}from"./VTextField.1b37a66e.js";import{V as N}from"./VDivider.5fbe829f.js";import{V as h}from"./VForm.9a7f2cfe.js";const H={class:"d-flex justify-content-center aling-items-center"},J={key:0,class:"d-flex justify-content-between aling-items-center p-2"},re=I({__name:"Form",setup(O){const f=R(),p=k(),u=K(),{formulario:r,loading:v,fixedAssetGroupsList:y,fixedAssetGroupsCountLinks:L}=j(u),n=k([]),$={company_id:f.company.id},b=async i=>{var a;await((a=p.value)==null?void 0:a.resetValidation()),u.typeAction=i,n.value=[],i!="back"&&u.keyList++},B=async()=>{var a;const i=await((a=p.value)==null?void 0:a.validate());if(r.value.company_id=f.company.id,i!=null&&i.valid){const d=await u.fetchSave();d.status===200&&b("list"),d.status===422&&(n.value=d.error)}},l=Q(u.fetchSelect2FixedAsset,y,$),G=(i,a)=>{let d=l.dataNueva.value.find(o=>o.id===i);d&&(a.fixed_asset_group_id=d.id)};return D(async()=>{await u.fetchDataForm({company_id:f.company.id}),l.dataNueva.value=y.value,l.totalLinks.value=L.value}),(i,a)=>{const d=U("RouterLink");return C(),A("div",null,[t(x,null,{default:s(()=>[t(m,{cols:"12",class:"d-flex justify-content-end"},{default:s(()=>[t(c,{color:"secondary",onClick:a[0]||(a[0]=o=>b("back"))},{default:s(()=>[V(" Atras ")]),_:1})]),_:1})]),_:1}),t(h,{ref_key:"formValidation",ref:p,"lazy-validation":""},{default:s(()=>[t(x,null,{default:s(()=>[t(m,{cols:"4"},{default:s(()=>[t(P,{clearable:"",loading:e(v),"item-title":"name","item-value":"id",label:"Grupo de Activo",items:e(l).dataNueva.value,modelValue:e(r).fixed_asset_group_id,"onUpdate:modelValue":a[4]||(a[4]=o=>{G(o,e(r)),e(n).fixed_asset_group_id=""}),"onClick:clear":a[5]||(a[5]=o=>e(r).fixed_asset_group_id=null),rules:[e(g)],"error-messages":e(n).fixed_asset_group_id},{"prepend-item":s(()=>[t(_,{clearable:"",placeholder:"Buscar...",class:"mb-2",modelValue:e(l).searchQuery.value,"onUpdate:modelValue":a[1]||(a[1]=o=>e(l).searchQuery.value=o)},null,8,["modelValue"]),t(N)]),"append-item":s(()=>[t(N),w("div",H,[z(t(T,{size:"24",color:"primary",indeterminate:""},null,512),[[q,e(v)]])]),e(v)?E("",!0):(C(),A("div",J,[t(d,{to:{name:"Admin-FixedAssetGroup-Index"},class:"app-logo d-flex align-center gap-x-3 app-title-wrapper"},{default:s(()=>[t(c,{color:"success"},{default:s(()=>[V("Crear Registro")]),_:1})]),_:1}),w("div",null,[t(c,{class:"mt-2",disabled:e(l).page.value<=1,onClick:a[2]||(a[2]=o=>e(l).prev()),color:"success"},{default:s(()=>[t(F,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),t(c,{class:"mt-2",disabled:e(l).page.value>=e(l).totalLinks.value,onClick:a[3]||(a[3]=o=>e(l).next()),color:"success"},{default:s(()=>[t(F,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:1},8,["loading","items","modelValue","rules","error-messages"])]),_:1}),t(m,{cols:"4"},{default:s(()=>[t(_,{clearable:"",modelValue:e(r).code,"onUpdate:modelValue":a[6]||(a[6]=o=>e(r).code=o),"error-messages":e(n).code,maxlength:"30",label:"C\xF3digo",onKeypress:a[7]||(a[7]=o=>e(n).code=""),rules:[e(g),e(S)(e(r).code,30),e(M)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(m,{cols:"4"},{default:s(()=>[t(_,{clearable:"",modelValue:e(r).name,"onUpdate:modelValue":a[8]||(a[8]=o=>e(r).name=o),"error-messages":e(n).name,maxlength:"50",label:"Nombre",onKeypress:a[9]||(a[9]=o=>e(n).name=""),rules:[e(g),e(S)(e(r).name,50)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),t(x,null,{default:s(()=>[t(m,{cols:"12 d-flex justify-content-center"},{default:s(()=>[t(c,{color:"primary",onClick:a[10]||(a[10]=o=>B())},{default:s(()=>[V("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},512)])}}});export{re as _};
