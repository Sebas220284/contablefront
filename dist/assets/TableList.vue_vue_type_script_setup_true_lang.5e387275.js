import{d as L,E as j,j as M,b9 as Q,k,aB as q,C as b,bm as O,O as G,o as _,c as g,p as l,w as i,m as e,q as n,bi as x,z as B,a2 as h,a3 as v,F as D,a as H,x as p,V as P}from"./index.1bb36a93.js";import{S as J}from"./sweetalert2.74fe64d4.js";import{u as K}from"./useCrudCompanyStore.b0851091.js";import{_ as W}from"./PreloadInterno.vue_vue_type_script_setup_true_lang.45fe2ba0.js";import{V as X}from"./VSelect.ff4ebc03.js";import{V as Y}from"./VSpacer.c965114a.js";import{V as Z}from"./VTextField.1b37a66e.js";import{V}from"./VBtn.22d55266.js";import{V as $}from"./VContainer.fea237fc.js";import{V as T}from"./VDivider.5fbe829f.js";import{V as ee}from"./VSwitch.372fef15.js";import{V as te}from"./VTable.ef7fd960.js";import{V as ae}from"./VPagination.37591e70.js";const le={class:"me-3",style:{width:"80px"}},se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},oe={style:{width:"10rem"}},ne=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," Empresa "),e("th",{scope:"col"}," Nit "),e("th",{scope:"col"}," Plan "),e("th",{scope:"col"}," Nombre representante "),e("th",{scope:"col"}," Tel\xE9fono representante "),e("th",{scope:"col"}," Estado "),e("th",{scope:"col"}," Acciones ")])],-1),re={colspan:"7"},ie=e("td",null,[e("span",null," Plan ")],-1),ce={class:"text-center",style:{width:"5rem"}},ue=e("tr",null,[e("td",{colspan:"7",class:"text-center"}," No se encuentran resultados ")],-1),de=[ue],pe={class:"text-sm text-disabled"},Be=L({__name:"TableList",setup(me){const r=K(),w=j(),N=M(),{currentPage:s,totalPage:m,lastPage:z,totalData:U,companies:f,loading:C}=Q(r),c=k(10),u=k(""),y=async()=>{await r.fetchAll({user_id:w.user.id,perPage:c.value,page:s.value,searchQuery:u.value})};q(async()=>{await y()}),b(s,async()=>{s.value>m.value&&(s.value=m.value)}),b(c,async()=>{s.value=1}),O([s,u,c],async()=>{await y()});const A=G(()=>{const o=f.value.length?(s.value-1)*m.value+1:0,a=f.value.length+(s.value-1)*m.value;return`Mostrando ${o} a ${a} de ${U.value} registros`}),S=async(o,a)=>{r.clearFormulario(),r.typeAction=o,a&&r.fetchInfoCompany(a)},E=o=>{w.company=o,N.push({name:"index"})},F=async(o,a)=>{r.changeState(o,a)},R=async o=>{J.fire({title:"\xBFDesea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await r.fetchDelete(o),await y()):a.isDenied})};return(o,a)=>(_(),g(D,null,[l($,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:i(()=>[e("div",le,[l(X,{modelValue:n(c),"onUpdate:modelValue":a[0]||(a[0]=t=>x(c)?c.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),l(Y),e("div",se,[e("div",oe,[l(Z,{modelValue:n(u),"onUpdate:modelValue":a[1]||(a[1]=t=>x(u)?u.value=t:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),l(V,{color:"primary",onClick:a[2]||(a[2]=t=>S("form"))},{default:i(()=>[B(" Crear empresa ")]),_:1})])]),_:1}),l(T),l(te,{class:"text-no-wrap"},{default:i(()=>[ne,e("tbody",null,[h(e("tr",null,[e("td",re,[l(W)])],512),[[v,n(C)]]),(_(!0),g(D,null,H(n(f),(t,I)=>h((_(),g("tr",{key:I,style:{height:"3.75rem"}},[e("td",null,[e("span",null,p(t.name),1)]),e("td",null,[e("span",null,p(t.nit),1)]),ie,e("td",null,[e("span",null,p(t.nameLegalRepresentative),1)]),e("td",null,[e("span",null,p(t.phoneLegalRepresentative),1)]),e("td",null,[l(ee,{modelValue:t.state,"onUpdate:modelValue":d=>t.state=d,color:"success",inset:"",value:t.state,"true-value":1,"false-value":0,"hide-details":"",onClick:d=>F(t,t.state)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),e("td",ce,[l(V,{icon:"",size:"x-small",color:"error",variant:"text",onClick:d=>R(t.id)},{default:i(()=>[l(P,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),l(V,{icon:"",size:"x-small",color:"default",variant:"text",onClick:d=>S("form",t.id)},{default:i(()=>[l(P,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),h(l(V,{color:"primary",onClick:d=>E(t)},{default:i(()=>[B(" Ingresar ")]),_:2},1032,["onClick"]),[[v,t.state===1]])])])),[[v,!n(C)]])),128))]),h(e("tfoot",null,de,512),[[v,!n(f).length]])]),_:1}),l(T),l($,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:i(()=>[e("span",pe,p(n(A)),1),l(ae,{modelValue:n(s),"onUpdate:modelValue":a[3]||(a[3]=t=>x(s)?s.value=t:null),size:"small","total-visible":5,length:n(z)},null,8,["modelValue","length"])]),_:1})],64))}});export{Be as _};
