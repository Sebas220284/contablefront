import{d as H,E as J,b9 as K,k as b,aB as W,C as D,bm as X,O as Y,o as k,c as U,p as e,w as o,ba as Z,bF as ee,q as n,z as y,a2 as g,m as l,bE as le,a3 as w,bi as S,F as ae,a as te,x as p,V as $}from"./index.1bb36a93.js";import{S as oe}from"./sweetalert2.74fe64d4.js";import{u as ne}from"./useCrudUserStore.0ff7b9dd.js";import{_ as se}from"./PreloadInterno.vue_vue_type_script_setup_true_lang.45fe2ba0.js";import{V as ie}from"./index.5010adc7.js";import{a as d,V as C}from"./VRow.971cb494.js";import{V as c}from"./VBtn.22d55266.js";import{V as N}from"./VSpacer.c965114a.js";import{V as B}from"./VDivider.5fbe829f.js";import{V as E}from"./VSelect.ff4ebc03.js";import{V as P}from"./VCheckbox.b279b9c1.js";import{V as F}from"./VTextField.1b37a66e.js";import{V as z}from"./VContainer.fea237fc.js";import{V as re}from"./VSwitch.372fef15.js";import{V as ue}from"./VTable.ef7fd960.js";import{V as de}from"./VPagination.37591e70.js";const ce={class:"mt-4"},me=l("span",null,"Estado",-1),fe={class:"mt-4"},pe={class:"me-3",style:{width:"80px"}},Ve={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ve={style:{width:"10rem"}},_e=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," Nombre usuario "),l("th",{scope:"col"}," N\xFAmero de identificaci\xF3n "),l("th",{scope:"col"}," Tel\xE9fono "),l("th",{scope:"col"}," Correo "),l("th",{scope:"col"}," Rol "),l("th",{scope:"col"}," Acciones "),l("th",{scope:"col"}," Estado ")])],-1),he={colspan:"6"},xe={class:"text-center",style:{width:"5rem"}},ye=l("tr",null,[l("td",{colspan:"7",class:"text-center"}," No se encuentran resultados ")],-1),ge=[ye],we={class:"text-sm text-disabled"},Le=H({__name:"TableList",setup(Ce){const R=J(),u=ne(),{users:_,totalPage:h,lastPage:I,currentPage:i,totalData:L,show:m,arrayRoles:j,loading:A}=K(u),f=b(10),V=b(""),s=b({}),v=async()=>{await u.fetchAll({company_id:R.company.id,perPage:f.value,page:i.value,searchQuery:V.value,role_id:s.value.role_id,state:s.value.state,name:s.value.name,identification:s.value.identification})};W(async()=>{await v()}),D(i,async()=>{i.value>h.value&&(i.value=h.value)}),D(f,async()=>{i.value=1}),X([i,V,f],async()=>{await v()});const q=Y(()=>{const r=_.value.length?(i.value-1)*h.value+1:0,a=_.value.length+(i.value-1)*h.value;return`Mostrando ${r} a ${a} de ${L.value} registros`}),T=async(r,a=null)=>{u.clearFormulario(),u.typeAction=r,a&&u.fetchInfoUser(a)},M=async(r,a)=>{u.changeState(r,a)},Q=()=>{s.value={},v()},O=async r=>{oe.fire({title:"\xBFDesea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await u.fetchDelete(r),await v()):a.isDenied})};return(r,a)=>(k(),U("div",null,[e(C,null,{default:o(()=>[e(d,{cols:"12"},{default:o(()=>[e(Z,null,{default:o(()=>[e(ee,null,{default:o(()=>[e(c,{color:"orange-lighten-2",variant:"text",onClick:a[0]||(a[0]=t=>m.value=!n(m))},{default:o(()=>[y(" Criterios de b\xFAsqueda ")]),_:1}),e(N),e(c,{icon:n(m)?"mdi-chevron-up":"mdi-chevron-down",onClick:a[1]||(a[1]=t=>m.value=!n(m))},null,8,["icon"])]),_:1}),e(ie,null,{default:o(()=>[g(l("div",null,[e(B),e(le,null,{default:o(()=>[e(C,null,{default:o(()=>[e(d,{cols:"6"},{default:o(()=>[l("div",null,[e(E,{items:n(j),"item-title":"name",modelValue:n(s).role_id,"onUpdate:modelValue":a[2]||(a[2]=t=>n(s).role_id=t),"item-value":"id",label:"Tipo de usuario"},null,8,["items","modelValue"])]),l("div",ce,[e(C,null,{default:o(()=>[e(d,{cols:"12",sm:"2",md:"2"},{default:o(()=>[me]),_:1}),e(d,{cols:"12",sm:"4",md:"4"},{default:o(()=>[e(P,{label:"Activo",value:1,modelValue:n(s).state,"onUpdate:modelValue":a[3]||(a[3]=t=>n(s).state=t)},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"4",md:"4"},{default:o(()=>[e(P,{value:0,modelValue:n(s).state,"onUpdate:modelValue":a[4]||(a[4]=t=>n(s).state=t),label:"Inactivo"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),e(d,{cols:"6"},{default:o(()=>[l("div",null,[e(F,{label:"Usuario",modelValue:n(s).name,"onUpdate:modelValue":a[5]||(a[5]=t=>n(s).name=t)},null,8,["modelValue"])]),l("div",fe,[e(F,{label:"N\xFAmero de identificaci\xF3n",modelValue:n(s).identification,"onUpdate:modelValue":a[6]||(a[6]=t=>n(s).identification=t)},null,8,["modelValue"])])]),_:1})]),_:1}),e(C,null,{default:o(()=>[e(d,{cols:"12 d-flex justify-content-center"},{default:o(()=>[e(c,{color:"primary",class:"mr-2",onClick:v},{default:o(()=>[y("Buscar")]),_:1}),e(c,{color:"primary",onClick:Q},{default:o(()=>[y("Limpiar Filtros")]),_:1})]),_:1})]),_:1})]),_:1})],512),[[w,n(m)]])]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[l("div",pe,[e(E,{modelValue:n(f),"onUpdate:modelValue":a[7]||(a[7]=t=>S(f)?f.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(N),l("div",Ve,[l("div",ve,[e(F,{modelValue:n(V),"onUpdate:modelValue":a[8]||(a[8]=t=>S(V)?V.value=t:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(c,{color:"primary",onClick:a[9]||(a[9]=t=>T("form"))},{default:o(()=>[y(" Agregar ")]),_:1})])]),_:1}),e(B),e(ue,{class:"text-no-wrap"},{default:o(()=>[_e,l("tbody",null,[g(l("tr",null,[l("td",he,[e(se)])],512),[[w,n(A)]]),(k(!0),U(ae,null,te(n(_),(t,G)=>g((k(),U("tr",{key:G,style:{height:"3.75rem"}},[l("td",null,[l("span",null,p(t.name),1)]),l("td",null,[l("span",null,p(t.identification),1)]),l("td",null,[l("span",null,p(t.phone),1)]),l("td",null,[l("span",null,p(t.email),1)]),l("td",null,[l("span",null,p(t.role),1)]),l("td",null,[e(re,{modelValue:t.state,"onUpdate:modelValue":x=>t.state=x,color:"success",inset:"",value:t.state,"true-value":1,"false-value":0,"hide-details":"",onClick:x=>M(t,t.state)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),l("td",xe,[e(c,{size:"x-small",color:"error",variant:"text",onClick:x=>O(t.id)},{default:o(()=>[e($,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(c,{icon:"",size:"x-small",color:"default",variant:"text",onClick:x=>T("form",t.id)},{default:o(()=>[e($,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])])])),[[w,!n(A)]])),128))]),g(l("tfoot",null,ge,512),[[w,!n(_).length]])]),_:1}),e(B),e(z,{fluid:"",class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[l("span",we,p(n(q)),1),e(de,{modelValue:n(i),"onUpdate:modelValue":a[10]||(a[10]=t=>S(i)?i.value=t:null),size:"small","total-visible":5,length:n(I)},null,8,["modelValue","length"])]),_:1})]))}});export{Le as _};
