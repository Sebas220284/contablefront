import{d as Z,E as M,b9 as ee,k as ae,o as B,c as le,a2 as ue,a3 as oe,q as e,m as _,p as u,w as o,b as D,V as E,z as G,I as w,x as q,bi as te,ba as de,bc as ne,bE as re,bF as ie,F as ce}from"./index.1bb36a93.js";import{S as H}from"./sweetalert2.74fe64d4.js";import{u as se}from"./useLedgerAccountStore.f9be3ddb.js";import{u as ve}from"./useFormValidation.9ecda401.js";import{a as n,V as b}from"./VRow.971cb494.js";import{V as J}from"./VDivider.5fbe829f.js";import{V as y}from"./VTextField.1b37a66e.js";import{V as z}from"./VBtn.22d55266.js";import{V as me}from"./VDialog.5c3f52d4.js";import{V as O}from"./VContainer.fea237fc.js";import{V as P}from"./VSelect.ff4ebc03.js";import{V as Q}from"./VCheckbox.b279b9c1.js";import{V as fe}from"./VSpacer.c965114a.js";const ge=_("label",{for:""},"Codigo",-1),_e=_("label",{for:""},"Nombre",-1),Ae=_("span",null,"Clase",-1),pe=_("span",null,"Grupo",-1),xe=_("span",null,"Cuenta",-1),be=_("span",null,"Sub Cuenta",-1),ye=_("span",null,"Auxiliar",-1),Ce=_("span",null,"Sub Auxiliar",-1),Ve={class:"text-h5"},ke=_("label",{for:""},"Codigo",-1),Se=_("label",{for:""},"Nombre",-1),Be=_("h2",{for:""},"Caracter\xEDstica transaccional",-1),De=_("label",{for:""},"Relacionado con",-1),we=_("label",{for:""},"Categor\xEDa",-1),Ue=_("label",{for:""},"Detallar saldos de cartera o proveedores",-1),$e=_("label",{for:""},"Cuenta de diferencia fiscal o ajustes NIIF",-1),Te=_("label",{for:""},"Activa",-1),Ee=_("span",{for:""},"* Todas las cuentas contables se manejan a nivel de tercero",-1),Pe=Z({__name:"Show",setup(Ge){const x=M(),L=se(),{clase:$,formulario:t,titleModal:v,titleButton:f,group:g,account:m,subAccount:c,auxiliary:s,subAuxiliary:i,typeClick:d,codeInitial:p,maxlength:V,minlength:k,routeName:S,ledgerAccountCategory:W,ledgerAccountBalance:X}=ee(L),I=ve(),T=I.errors,j=ae(!1);let R=!1;const Y=["4","5","6","7"];t.value.ledgerAccountCategory_id=1,t.value.ledgerAccountBalance_id=1,t.value.relatedTo="Sin asignar";const F=(U,l=null,a=null)=>{if(T.value=[],d.value==="clase"?(V.value=1,k.value=1):(V.value=2,k.value=2),j.value=U,t.value.name="",t.value.code="",t.value.tax_difference_account="",t.value.active="",Y.includes($.value.code)?R=!0:R=!1,l==="create"&&f.value==="Crear Grupo"&&(p.value=$.value.code,d.value="clase",v.value="Crear Grupo",f.value="Crear Grupo",S.value="/ledgerAccount-group-create"),l==="create"&&f.value==="Crear Cuenta"&&(p.value=g.value.code,d.value="group",v.value="Crear Cuenta",f.value="Crear Cuenta",S.value="/ledgerAccount-account-create"),l==="create"&&f.value==="Crear SubCuenta"&&(p.value=m.value.code,v.value="Crear SubCuenta",d.value="account",f.value="Crear SubCuenta",S.value="/ledgerAccount-subAccount-create"),l==="editSubAcount"){v.value="Editar Sub Cuenta",d.value="account",S.value="/ledgerAccount-subAccount-create";for(const r in a)t.value[r]=a[r],t.value.code=a.code.slice(4),p.value=a.code.slice(0,-2),a.active==1?a.active=!0:a.active=!1,a.tax_difference_account==1?a.tax_difference_account=!0:a.tax_difference_account=!1}if(l==="create"&&f.value==="Crear Auxiliar"&&(p.value=c.value.code,v.value="Crear Auxiliar",d.value="subAccount",S.value="/ledgerAccount-auxiliary-create"),l==="editAuxiliary"){v.value="Editar Auxiliar",d.value="subAccount",S.value="/ledgerAccount-auxiliary-create";for(const r in a)t.value[r]=a[r],t.value.code=a.code.slice(6),p.value=a.code.slice(0,-2),a.active==1?a.active=!0:a.active=!1,a.tax_difference_account==1?a.tax_difference_account=!0:a.tax_difference_account=!1}if(l==="create"&&f.value==="Crear Sub Auxiliar"&&(p.value=s.value.code,v.value="Crear Sub Auxiliar",d.value="auxiliary",S.value="/ledgerAccount-subAuxiliary-create"),l==="editSubAuxiliary"){v.value="Editar Sub Auxiliar",d.value="auxiliary",S.value="/ledgerAccount-subAuxiliary-create";for(const r in a)t.value[r]=a[r],t.value.code=a.code.slice(8),p.value=a.code.slice(0,-2),a.active==1?a.active=!0:a.active=!1,a.tax_difference_account==1?a.tax_difference_account=!0:a.tax_difference_account=!1}},h=(U=null)=>{U||v.value==="Editar Sub Cuenta"||v.value==="Editar Auxiliar"||v.value==="Editar Sub Auxiliar"?H.fire({text:`Al realizar este cambio se actualizar\xE1 tu informaci\xF3n, y no se reflejar\xE1 en la vista de los documentos.
       \xBFDesea continuar?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Aceptar",customClass:{container:"my-swal"}}).then(l=>{if(l.isConfirmed){switch(U){case"/ledgerAccount-group-create":d.value="group";break;case"/ledgerAccount-account-create":d.value="account";break}K(U)}}):K()},K=async(U=null)=>{const l=["tax_difference_account","active","relatedTo"],a={code:"c\xF3digo",name:"nombre",ledgerAccountCategory_id:"Categor\xEDa",ledgerAccountBalance_id:"Detallar saldos de cartera o proveedores"};let r={};if(d.value==="group"?r={id:g.value.id,code:g.value.code,name:g.value.name,ledgerAccountClass_id:$.value.id,company_id:x.company.id}:d.value==="account"&&(r={id:m.value.id,code:m.value.code,name:m.value.name,ledgerAccountClass_id:$.value.id,ledgerAccountGroup_id:g.value.id,company_id:x.company.id}),U||(d.value==="group"?r={code:p.value+t.value.code,name:t.value.name,ledgerAccountClass_id:$.value.id,ledgerAccountGroup_id:g.value.id,company_id:x.company.id}:d.value==="account"||d.value==="subAccount"||d.value==="auxiliary"?(r={code:p.value+t.value.code,name:t.value.name,ledgerAccountClass_id:$.value.id,ledgerAccountGroup_id:g.value.id,company_id:x.company.id,ledgerAccountAccount_id:m.value.id,ledgerAccountCategory_id:t.value.ledgerAccountCategory_id,ledgerAccountBalance_id:t.value.ledgerAccountBalance_id,tax_difference_account:t.value.tax_difference_account,active:t.value.active,relatedTo:t.value.relatedTo},c.value.id&&d.value==="account"&&(r.id=c.value.id),(d.value==="subAccount"||d.value==="auxiliary")&&(r.ledgerAccountSubAccount_id=c.value.id),s&&s.value.id&&d.value==="subAccount"&&(r.id=s.value.id),d.value==="auxiliary"&&(r.ledgerAccountAuxiliarie_id=s.value.id),i&&i.value.id&&d.value==="auxiliary"&&(r.id=i.value.id)):r={code:p.value+t.value.code,name:t.value.name,ledgerAccountClass_id:$.value.id,company_id:x.company.id}),I.validation(r,l,"",a),console.log("formDataformDataformData",I),I.exito.value){const A=await L.fetchSave(U,r);if(A.status===422&&(T.value=A.error),A.status===200){if(F(!1),d.value==="clase"&&!g.id){for(const C in A.formedit)g.value[C]=A.formedit[C];V.value=2,k.value=2,p.value=A.formedit.code,d.value="group",v.value="Crear Cuenta",f.value="Crear Cuenta",S.value="/ledgerAccount-account-create"}if(d.value==="group"&&r.ledgerAccountGroup_id!=null){for(const C in A.formedit)m.value[C]=A.formedit[C];V.value=2,k.value=2,p.value=A.formedit.code,d.value="account",v.value="Crear SubCuenta",f.value="Crear SubCuenta",S.value="/ledgerAccount-subAccount-create"}if(d.value==="account"&&r.ledgerAccountGroup_id!=null&&r.ledgerAccountAccount_id!=null){for(const C in A.formedit)c.value[C]=A.formedit[C];V.value=2,k.value=2,p.value=A.formedit.code,d.value="subAccount",v.value="Crear Auxiliar",f.value="Crear Auxiliar",S.value="/ledgerAccount-auxiliary-create"}if(d.value==="subAccount"&&r.ledgerAccountGroup_id!=null&&r.ledgerAccountAccount_id!=null&&r.ledgerAccountSubAccount_id!=null){for(const C in A.formedit)s.value[C]=A.formedit[C];V.value=2,k.value=2,p.value=A.formedit.code,d.value="auxiliary",v.value="Crear Sub Auxiliar",f.value="Crear Sub Auxiliar",S.value="/ledgerAccount-subAuxiliary-create"}if(d.value==="auxiliary"&&r.ledgerAccountGroup_id!=null&&r.ledgerAccountAccount_id!=null&&r.ledgerAccountSubAccount_id!=null&&r.ledgerAccountAuxiliarie_id!=null){for(const C in A.formedit)i.value[C]=A.formedit[C];V.value=2,k.value=2,p.value=A.formedit.code,d.value="subAuxiliary",v.value="",f.value="",S.value="/ledgerAccount-subAuxiliary-create"}}}},N=async(U,l,a)=>{H.fire({title:"Las cuentas contables ser\xE1n borradas y el movimiento relacionado a los auxiliares o subauxiliares se acumular\xE1 en el nivel superior",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async r=>{if(r.isConfirmed)switch(await L.fetchDelete(U,l),a){case"group":g.value={},m.value={},c.value={},s.value={},i.value={},d.value="group",v.value="Crear Grupo",f.value="Crear Grupo";break;case"account":m.value={},c.value={},s.value={},i.value={},d.value="account",v.value="Crear Cuenta",f.value="Crear Cuenta";break;case"subAccount":c.value={},s.value={},i.value={},d.value="subAccount",v.value="Crear SubCuenta",f.value="Crear SubCuenta";break;case"auxiliary":s.value={},i.value={},d.value="auxiliary",v.value="Crear Auxiliar",f.value="Crear Auxiliar";break;case"subAuxiliary":i.value={},d.value="subAuxiliary",v.value="Crear Sub Auxiliar",f.value="Crear Sub Auxiliar";break}else r.isDenied})};return(U,l)=>(B(),le(ce,null,[ue(_("div",null,[u(b,null,{default:o(()=>[u(n,{cols:"2"}),u(n,{cols:"4"},{default:o(()=>[ge]),_:1}),u(n,{cols:"6"},{default:o(()=>[_e]),_:1})]),_:1}),u(J),u(b,{class:"mt-2"},{default:o(()=>[u(n,{cols:"2"},{default:o(()=>[Ae]),_:1}),u(n,{cols:"4"},{default:o(()=>[u(y,{value:e($).code,disabled:""},null,8,["value"])]),_:1}),u(n,{cols:"6"},{default:o(()=>[u(y,{value:e($).name,disabled:""},null,8,["value"])]),_:1})]),_:1}),e(g).id||e(g).code?(B(),D(b,{key:0,class:"mt-2"},{default:o(()=>[u(n,{cols:"2"},{default:o(()=>[pe]),_:1}),u(n,{cols:"4"},{default:o(()=>[u(y,{maxlength:e(V),minlength:e(k),modelValue:e(g).code,"onUpdate:modelValue":l[0]||(l[0]=a=>e(g).code=a),disabled:e(m).id},null,8,["maxlength","minlength","modelValue","disabled"])]),_:1}),u(n,{cols:!e(m).id&&e(g).company_id===e(x).company.id?4:6},{default:o(()=>[u(y,{modelValue:e(g).name,"onUpdate:modelValue":l[1]||(l[1]=a=>e(g).name=a),disabled:e(m).id},null,8,["modelValue","disabled"])]),_:1},8,["cols"]),!e(m).id&&e(g).company_id===e(x).company.id?(B(),D(n,{key:0,cols:"2"},{default:o(()=>[u(E,{onClick:l[2]||(l[2]=a=>h("/ledgerAccount-group-create"))},{default:o(()=>[G("mdi-floppy")]),_:1}),u(z,{icon:"",size:"x-small",color:"error",variant:"text",onClick:l[3]||(l[3]=a=>N(e(g).id,"/ledgerAccount-group-delete","group"))},{default:o(()=>[u(E,{size:"22",icon:"tabler-trash"})]),_:1})]),_:1})):w("",!0)]),_:1})):w("",!0),e(m).id?(B(),D(b,{key:1,class:"mt-2"},{default:o(()=>[u(n,{cols:"2"},{default:o(()=>[xe]),_:1}),u(n,{cols:"4"},{default:o(()=>[u(y,{maxlength:e(V),minlength:e(k),modelValue:e(m).code,"onUpdate:modelValue":l[4]||(l[4]=a=>e(m).code=a),disabled:e(c).id},null,8,["maxlength","minlength","modelValue","disabled"])]),_:1}),u(n,{cols:!e(c).id&&e(m).company_id===e(x).company.id?4:6},{default:o(()=>[u(y,{modelValue:e(m).name,"onUpdate:modelValue":l[5]||(l[5]=a=>e(m).name=a),disabled:e(c).id},null,8,["modelValue","disabled"])]),_:1},8,["cols"]),!e(c).id&&e(m).company_id===e(x).company.id?(B(),D(n,{key:0,cols:"2"},{default:o(()=>[u(E,{onClick:l[6]||(l[6]=a=>h("/ledgerAccount-account-create"))},{default:o(()=>[G("mdi-floppy")]),_:1}),u(z,{icon:"",size:"x-small",color:"error",variant:"text",onClick:l[7]||(l[7]=a=>N(e(m).id,"/ledgerAccount-account-delete","account"))},{default:o(()=>[u(E,{size:"22",icon:"tabler-trash"})]),_:1})]),_:1})):w("",!0)]),_:1})):w("",!0),e(c).id?(B(),D(b,{key:2,class:"mt-2"},{default:o(()=>[u(n,{cols:"2"},{default:o(()=>[be]),_:1}),u(n,{cols:"4"},{default:o(()=>[u(y,{maxlength:e(V),minlength:e(k),modelValue:e(c).code,"onUpdate:modelValue":l[8]||(l[8]=a=>e(c).code=a),disabled:e(c).id},null,8,["maxlength","minlength","modelValue","disabled"])]),_:1}),u(n,{cols:!e(s).id&&e(c).company_id===e(x).company.id?4:6},{default:o(()=>[u(y,{modelValue:e(c).name,"onUpdate:modelValue":l[9]||(l[9]=a=>e(c).name=a),disabled:e(c).id},null,8,["modelValue","disabled"])]),_:1},8,["cols"]),!e(s).id&&e(c).company_id===e(x).company.id?(B(),D(n,{key:0,cols:"2"},{default:o(()=>[u(E,{onClick:l[10]||(l[10]=a=>F(!0,"editSubAcount",e(c)))},{default:o(()=>[G("mdi-floppy")]),_:1}),u(z,{icon:"",size:"x-small",color:"error",variant:"text",onClick:l[11]||(l[11]=a=>N(e(c).id,"/ledgerAccount-subAccount-delete","subAccount"))},{default:o(()=>[u(E,{size:"22",icon:"tabler-trash"})]),_:1})]),_:1})):w("",!0)]),_:1})):w("",!0),e(s).id?(B(),D(b,{key:3,class:"mt-2"},{default:o(()=>[u(n,{cols:"2"},{default:o(()=>[ye]),_:1}),u(n,{cols:"4"},{default:o(()=>[u(y,{maxlength:e(V),minlength:e(k),modelValue:e(s).code,"onUpdate:modelValue":l[12]||(l[12]=a=>e(s).code=a),disabled:e(s).id},null,8,["maxlength","minlength","modelValue","disabled"])]),_:1}),u(n,{cols:!e(i).id&&e(s).company_id===e(x).company.id?4:6},{default:o(()=>[u(y,{modelValue:e(s).name,"onUpdate:modelValue":l[13]||(l[13]=a=>e(s).name=a),disabled:e(s).id},null,8,["modelValue","disabled"])]),_:1},8,["cols"]),!e(i).id&&e(s).company_id===e(x).company.id?(B(),D(n,{key:0,cols:"2"},{default:o(()=>[u(E,{onClick:l[14]||(l[14]=a=>F(!0,"editAuxiliary",e(s)))},{default:o(()=>[G("mdi-floppy")]),_:1}),u(z,{icon:"",size:"x-small",color:"error",variant:"text",onClick:l[15]||(l[15]=a=>N(e(s).id,"/ledgerAccount-auxiliary-delete","auxiliary"))},{default:o(()=>[u(E,{size:"22",icon:"tabler-trash"})]),_:1})]),_:1})):w("",!0)]),_:1})):w("",!0),e(i).id?(B(),D(b,{key:4,class:"mt-2"},{default:o(()=>[u(n,{cols:"2"},{default:o(()=>[Ce]),_:1}),u(n,{cols:"4"},{default:o(()=>[u(y,{maxlength:e(V),minlength:e(k),modelValue:e(i).code,"onUpdate:modelValue":l[16]||(l[16]=a=>e(i).code=a),disabled:e(i).id},null,8,["maxlength","minlength","modelValue","disabled"])]),_:1}),u(n,{cols:e(i).company_id===e(x).company.id?4:6},{default:o(()=>[u(y,{modelValue:e(i).name,"onUpdate:modelValue":l[17]||(l[17]=a=>e(i).name=a),disabled:e(i).id},null,8,["modelValue","disabled"])]),_:1},8,["cols"]),e(i).id&&e(i).company_id===e(x).company.id?(B(),D(n,{key:0,cols:"2"},{default:o(()=>[u(E,{onClick:l[18]||(l[18]=a=>F(!0,"editSubAuxiliary",e(i)))},{default:o(()=>[G("mdi-floppy")]),_:1}),u(z,{icon:"",size:"x-small",color:"error",variant:"text",onClick:l[19]||(l[19]=a=>N(e(i).id,"/ledgerAccount-subAuxiliary-delete","subAuxiliary"))},{default:o(()=>[u(E,{size:"22",icon:"tabler-trash"})]),_:1})]),_:1})):w("",!0)]),_:1})):w("",!0),e(i).id?w("",!0):(B(),D(b,{key:5},{default:o(()=>[u(z,{color:"primary",class:"ml-auto mt-2",onClick:l[20]||(l[20]=a=>F(!0,"create"))},{default:o(()=>[G("+ "+q(e(f)),1)]),_:1})]),_:1}))],512),[[oe,e($).code]]),u(b,{justify:"center"},{default:o(()=>[u(me,{modelValue:e(j),"onUpdate:modelValue":l[34]||(l[34]=a=>te(j)?j.value=a:null),persistent:"",width:"1024"},{default:o(()=>[u(de,null,{default:o(()=>[u(ne,null,{default:o(()=>[_("span",Ve,q(e(v)),1)]),_:1}),u(re,null,{default:o(()=>[u(O,null,{default:o(()=>[u(b,null,{default:o(()=>[u(n,{cols:"12",sm:"6",md:"6"},{default:o(()=>[ke,u(y,{maxlength:e(V),minlength:e(k),prefix:e(p),"error-messages":e(T).code,modelValue:e(t).code,"onUpdate:modelValue":l[21]||(l[21]=a=>e(t).code=a),onKeypress:l[22]||(l[22]=a=>e(T).code="")},null,8,["maxlength","minlength","prefix","error-messages","modelValue"])]),_:1}),u(n,{cols:"12",sm:"6",md:"6"},{default:o(()=>[Se,u(y,{"error-messages":e(T).name,modelValue:e(t).name,"onUpdate:modelValue":l[23]||(l[23]=a=>e(t).name=a),onKeypress:l[24]||(l[24]=a=>e(T).name="")},null,8,["error-messages","modelValue"])]),_:1})]),_:1})]),_:1}),e(m).id?(B(),D(O,{key:0},{default:o(()=>[u(b,null,{default:o(()=>[u(n,{cols:"12",sm:"12",ms:"12",class:"mt-3"},{default:o(()=>[Be,u(J)]),_:1})]),_:1}),u(b,null,{default:o(()=>[u(n,{cols:"12",sm:"6",ms:"6"},{default:o(()=>[De,u(y,{disabled:"",modelValue:e(t).relatedTo,"onUpdate:modelValue":l[25]||(l[25]=a=>e(t).relatedTo=a)},null,8,["modelValue"])]),_:1}),u(n,{cols:"12",sm:"6",ms:"6"},{default:o(()=>[we,u(P,{items:e(W),modelValue:e(t).ledgerAccountCategory_id,"onUpdate:modelValue":l[26]||(l[26]=a=>e(t).ledgerAccountCategory_id=a),"item-title":"name","item-value":"id","error-messages":e(T).ledgerAccountCategory_id,onChange:l[27]||(l[27]=a=>e(T).ledgerAccountCategory_id="")},null,8,["items","modelValue","error-messages"])]),_:1})]),_:1}),u(b,null,{default:o(()=>[u(n,{cols:"12",sm:"6",ms:"6",class:"mt-3"},{default:o(()=>[Ue,u(P,{disabled:e(R),items:e(X),modelValue:e(t).ledgerAccountBalance_id,"onUpdate:modelValue":l[28]||(l[28]=a=>e(t).ledgerAccountBalance_id=a),"item-title":"name","item-value":"id","error-messages":e(T).ledgerAccountBalance_id,onChange:l[29]||(l[29]=a=>e(T).ledgerAccountBalance_id="")},null,8,["disabled","items","modelValue","error-messages"])]),_:1}),u(n,{cols:"12",sm:"6",ms:"6",class:"mt-3"},{default:o(()=>[$e,u(Q,{modelValue:e(t).tax_difference_account,"onUpdate:modelValue":l[30]||(l[30]=a=>e(t).tax_difference_account=a)},null,8,["modelValue"])]),_:1})]),_:1}),u(b,null,{default:o(()=>[u(n,{cols:"12",sm:"6",ms:"6",class:"mt-3"},{default:o(()=>[Te,u(Q,{modelValue:e(t).active,"onUpdate:modelValue":l[31]||(l[31]=a=>e(t).active=a)},null,8,["modelValue"])]),_:1})]),_:1}),u(b,null,{default:o(()=>[u(n,{cols:"12",sm:"12",ms:"12",class:"mt-3"},{default:o(()=>[Ee]),_:1})]),_:1})]),_:1})):w("",!0)]),_:1}),u(ie,null,{default:o(()=>[u(fe),u(z,{color:"blue-darken-1",variant:"text",onClick:l[32]||(l[32]=a=>F(!1))},{default:o(()=>[G(" Cerrar ")]),_:1}),u(z,{color:"blue-darken-1",variant:"text",onClick:l[33]||(l[33]=a=>h())},{default:o(()=>[G(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}});export{Pe as _};
