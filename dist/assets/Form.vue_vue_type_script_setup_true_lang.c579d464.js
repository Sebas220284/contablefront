import{d as I,E as N,k as V,b9 as E,aB as S,o as U,c as B,p as s,w as o,z as x,ba as b,q as e,b as T,H as j}from"./index.1bb36a93.js";import{u as z,V as q}from"./useImageUpload.49dcf1d8.js";import{u as M}from"./useCrudCompanyStore.b0851091.js";import{r as d,s as L,l as g,a as R,e as $}from"./validators.bb8f1929.js";import{a as n,V as u}from"./VRow.971cb494.js";import{V as D}from"./VBtn.22d55266.js";import{V as m}from"./VTextField.1b37a66e.js";import{V as A}from"./VForm.9a7f2cfe.js";const Y=I({__name:"Form",props:{companyId:{type:Number,default:null,required:!1}},setup(k){const F=k,f=M(),K=N(),i=V(z());i.value.allowedExtensions=["png","jpg","jpeg"];const{formulario:r}=E(f),v=V(),C=async p=>{var l;await((l=v.value)==null?void 0:l.resetValidation()),f.typeAction=p,p!="back"&&f.keyList++},t=V([]),y=V([]),w=async()=>{var l;i.value.imageUrl&&(r.value.logo=i.value.imageFile),r.value.id?y.value.logo=[]:y.value.logo=[d(r.value.logo)];const p=await((l=v.value)==null?void 0:l.validate());if(p!=null&&p.valid){r.value.user_id=K.user.id;const a=await f.fetchSave();a.status===200&&(i.value.imageFile=null,C("list")),a.status===422&&(t.value=a.error)}};return S(async()=>{F.companyId&&await f.fetchInfoCompany(F.companyId)}),(p,l)=>(U(),B("div",null,[s(u,null,{default:o(()=>[s(n,{cols:"12",class:"d-flex justify-content-end"},{default:o(()=>[s(D,{color:"secondary",onClick:l[0]||(l[0]=a=>C("list"))},{default:o(()=>[x(" Atras ")]),_:1})]),_:1})]),_:1}),s(A,{ref_key:"formValidation",ref:v,"lazy-validation":""},{default:o(()=>[s(b,{title:"Formulario de la compa\xF1ia"},{default:o(()=>[s(u,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[s(n,{cols:"4"},{default:o(()=>[s(m,{modelValue:e(r).name,"onUpdate:modelValue":l[1]||(l[1]=a=>e(r).name=a),"error-messages":e(t).name,label:"Nombre de la compa\xF1ia",onKeypress:l[2]||(l[2]=a=>e(t).name=""),maxlength:"30",rules:[e(d)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[s(m,{maxlength:"10",modelValue:e(r).nit,"onUpdate:modelValue":l[3]||(l[3]=a=>e(r).nit=a),"error-messages":e(t).nit,label:"Nit",onKeypress:l[4]||(l[4]=a=>{e(t).nit="",e(L)(a)}),rules:[e(d),e(g)(e(r).nit,10)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[s(m,{modelValue:e(r).phone,"onUpdate:modelValue":l[5]||(l[5]=a=>e(r).phone=a),maxlength:"15","error-messages":e(t).phone,label:"Tel\xE9fono de la compa\xF1ia",onKeypress:l[6]||(l[6]=a=>{e(t).phone="",e(L)(a)}),rules:[e(d),e(R)(e(r).phone,10),e(g)(e(r).phone,15)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),s(u,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[s(n,{cols:"4"},{default:o(()=>[s(m,{modelValue:e(r).address,"onUpdate:modelValue":l[7]||(l[7]=a=>e(r).address=a),"error-messages":e(t).address,label:"Direcci\xF3n de la compa\xF1ia",onKeypress:l[8]||(l[8]=a=>e(t).address=""),rules:[e(d)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[s(m,{type:"email",modelValue:e(r).email,"onUpdate:modelValue":l[9]||(l[9]=a=>e(r).email=a),"error-messages":e(t).email,label:"Correo",onKeypress:l[10]||(l[10]=a=>e(t).email=""),rules:[e(d),e($)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[(U(),T(q,{id:"logo","show-size":"",counter:"",label:"Logo",onChange:e(i).handleImageSelected,"error-messages":e(t).logo,accept:"image/*",key:e(i).key,rules:e(y).logo},{default:o(()=>[x(" /> ")]),_:1},8,["onChange","error-messages","rules"]))]),_:1})]),_:1}),s(u,{class:"mb-4"},{default:o(()=>[s(n,{cols:"12"},{default:o(()=>{var a;return[s(j,{contain:"",src:(a=e(i).imageUrl)!=null?a:e(r).logo,alt:"foto Personal","max-width":200,class:"mx-auto"},null,8,["src"])]}),_:1})]),_:1})]),_:1}),s(b,{class:"mt-2",title:"Datos de representante legal"},{default:o(()=>[s(u,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[s(n,{cols:"4"},{default:o(()=>[s(m,{maxlength:"50",modelValue:e(r).nameLegalRepresentative,"onUpdate:modelValue":l[11]||(l[11]=a=>e(r).nameLegalRepresentative=a),"error-messages":e(t).nameLegalRepresentative,label:"Nombre representante legal",onKeypress:l[12]||(l[12]=a=>e(t).nameLegalRepresentative=""),rules:[e(d),e(g)(e(r).nameLegalRepresentative,50)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[s(m,{modelValue:e(r).identification_rep,"onUpdate:modelValue":l[13]||(l[13]=a=>e(r).identification_rep=a),"error-messages":e(t).identification_rep,label:"C\xE9dula de representante legal",onKeypress:l[14]||(l[14]=a=>e(t).identification_rep=""),maxlength:"15",rules:[e(d),e(g)(e(r).identification_rep,15)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[s(m,{modelValue:e(r).phoneLegalRepresentative,"onUpdate:modelValue":l[15]||(l[15]=a=>e(r).phoneLegalRepresentative=a),"error-messages":e(t).phoneLegalRepresentative,label:"Tel\xE9fono representante legal",maxlength:"15",onKeypress:l[16]||(l[16]=a=>e(t).phoneLegalRepresentative=""),rules:[e(d),e(R)(e(r).phoneLegalRepresentative,10),e(g)(e(r).phoneLegalRepresentative,15)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1}),s(u,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[s(n,{cols:"4"},{default:o(()=>[s(m,{modelValue:e(r).address_rep,"onUpdate:modelValue":l[17]||(l[17]=a=>e(r).address_rep=a),"error-messages":e(t).address_rep,label:"Direcci\xF3n de representante legal",maxlength:"50",onKeypress:l[18]||(l[18]=a=>e(t).address_rep=""),rules:[e(d),e(g)(e(r).address_rep,50)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[s(m,{type:"email",modelValue:e(r).email_rep,"onUpdate:modelValue":l[19]||(l[19]=a=>e(r).email_rep=a),"error-messages":e(t).email_rep,label:"Correo de representante legal",onKeypress:l[20]||(l[20]=a=>e(t).email_rep=""),maxlength:"30",rules:[e(d),e($),e(g)(e(r).email_rep,30)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1}),s(b,{class:"mt-2",title:"Parametrizaci\xF3n"},{default:o(()=>[s(u,{class:"mr-3 ml-4 mb-4"},{default:o(()=>[s(n,{cols:"4"},{default:o(()=>[s(m,{type:"date",modelValue:e(r).startDate,"onUpdate:modelValue":l[21]||(l[21]=a=>e(r).startDate=a),"error-messages":e(t).startDate,label:"Fecha de inicio",onChange:l[22]||(l[22]=a=>e(t).startDate=""),rules:[e(d)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[s(m,{type:"date",modelValue:e(r).endDate,"onUpdate:modelValue":l[23]||(l[23]=a=>e(r).endDate=a),"error-messages":e(t).endDate,label:"Fecha final",onChange:l[24]||(l[24]=a=>e(t).endDate=""),rules:[e(d)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:o(()=>[s(m,{modelValue:e(r).description,"onUpdate:modelValue":l[25]||(l[25]=a=>e(r).description=a),"error-messages":e(t).description,label:"Descripci\xF3n",onKeypress:l[26]||(l[26]=a=>e(t).description="")},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),s(u,null,{default:o(()=>[s(n,{cols:"12 d-flex justify-content-center"},{default:o(()=>[s(D,{color:"primary",onClick:l[27]||(l[27]=a=>w())},{default:o(()=>[x("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},512)]))}});export{Y as _};
