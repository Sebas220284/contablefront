import{E as c,bo as d,bg as s,bp as o,bq as h}from"./index.1bb36a93.js";const u=c(),r=h(),f=d("useCrudCashReceiptStore",{state:()=>({loading:!1,cashReceiptData:{},formulario:{crConfigurations_id:null,company_id:null,number:null,customer_id:null,date_elaboration:null,perform_id:null,auxSubAux_id:null,auxSubAux_table:null,currencie_id:null,received_value:null,observation:null},formularioPdf:{},formArchive:{name:"",archive:File},typeAction:"list",third_customer:{},keyList:0,cashReceipts:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,arrayAdvanced:[],errorsArrayArchive:[],arrayArchives:[],arrayCurrencies:[],arrayPerformA:[],customers_arrayInfo:[],customers_countLinks:0,arrayAuxSubAux:[],auxSubAux_countLinks:0,cashReceiptConfiguration_arrayInfo:[],cashReceiptConfiguration_countLinks:0,arrayAuxSubAuxAvanced:[],auxSubAuxAvanced_countLinks:0,numberCumulative:0}),getters:{},actions:{clearFormulario(){this.formulario={crConfigurations_id:null,company_id:null,number:this.numberCumulative,customer_id:null,date_elaboration:"",perform_id:null,auxSubAux_id:null,auxSubAux_table:null,currencie_id:null,received_value:null,observation:null},this.arrayAdvanced=[],this.arrayArchives=[]},clearFormArchive(){this.formArchive={name:"",archive:File}},async fetchAll(i){this.loading=!0,await s.post("/cashReceipt-list",i).then(t=>{this.loading=!1,this.cashReceipts=t.data.cashReceipt,this.totalData=t.data.totalData,this.totalPage=t.data.totalPage,this.currentPage=t.data.currentPage,this.lastPage=t.data.lastPage,this.formulario.number=Number(t.data.number)+1,this.numberCumulative=Number(t.data.number)+1}).catch(async t=>{this.loading=!1,console.log(await t)})},clonarForm(){for(const i in this.formulario)this.cashReceiptData[i]=this.formulario[i]},async fetchSave(){const i=o(),t=new FormData;for(const e in this.formulario)t.append(e,this.formulario[e]);return this.formulario.arrayAdvanced=this.arrayAdvanced,t.append("arrayAdvanced",JSON.stringify(this.formulario.arrayAdvanced)),t.append("cantArrayArchives",String(this.arrayArchives.length)),this.arrayArchives.forEach((e,n)=>{t.append("arrayArchives"+n,e.archive),t.append("arrayArchives_id"+n,String(e.id)),t.append("arrayArchives_name"+n,String(e.name)),t.append("arrayArchives_delete"+n,String(e.delete))}),i.isLoading=!0,await await s.post("/cashReceipt-create",t).then(e=>(i.isLoading=!1,e.data.code===200&&(this.formulario=e.data.data,this.clonarForm(),this.clearFormulario(),r.toast("\xC9xito",e.data.message,"success")),e.data.code===500&&r.toast("Error",e.data.message,"danger"),console.log(e.data.status),e.data.status===422?(r.toast("Error",e.data.message,"danger"),{error:e.data.errors,status:e.data.status}):{status:e.data.code})).catch(async e=>(i.isLoading=!1,e.response.status===500&&r.toast("Error",e.response.data.message,"danger"),console.log(await e),{status:e.response.state}))},async fetchDataForm(){const i=o(),t={company_id:u.company.id};i.isLoading=!0,await s.post("/cashReceipt-dataForm",t).then(a=>{console.log(a.data),i.isLoading=!1,this.arrayCurrencies=a.data.currencies,this.arrayPerformA=a.data.performA,this.customers_arrayInfo=a.data.customers_arrayInfo,this.customers_countLinks=a.data.customers_countLinks,this.arrayAuxSubAux=a.data.arrayAuxSubAux,this.auxSubAux_countLinks=a.data.auxSubAux_countLinks,this.arrayAuxSubAuxAvanced=a.data.arrayAuxSubAux,this.auxSubAuxAvanced_countLinks=a.data.auxSubAux_countLinks,this.cashReceiptConfiguration_arrayInfo=a.data.cashReceiptConfiguration_arrayInfo,this.cashReceiptConfiguration_countLinks=a.data.cashReceiptConfiguration_countLinks}).catch(async a=>{i.isLoading=!1,console.log(await a)})},async fetchCustomerOfThirdList(i){return this.loading=!0,await s.post("/third-select2",i).then(a=>(this.loading=!1,this.customers_arrayInfo=a.data.customers_arrayInfo)).catch(async a=>{this.loading=!1,console.log(await a)})},async fetchLedgerAccountAuxiliaryList(i){return this.loading=!0,await s.post("/invoice-listAuxiliaryAndSubAuxiliary",i).then(a=>(this.loading=!1,this.arrayAuxSubAux=a.data.arrayInfo)).catch(async a=>(this.loading=!1,console.log(await a),0))},async fetchLedgerAccountAuxiliaryAvancedList(i){return this.loading=!0,await s.post("/invoice-listAuxiliaryAndSubAuxiliary",i).then(a=>(this.loading=!1,this.arrayAuxSubAuxAvanced=a.data.arrayInfo)).catch(async a=>(this.loading=!1,console.log(await a),0))},async cashReceiptConfigurationList(i){return this.loading=!0,await s.post("/cashReceiptConfiguration-select2",i).then(a=>(this.loading=!1,this.cashReceiptConfiguration_arrayInfo=a.data.cashReceiptConfiguration_arrayInfo)).catch(async a=>(this.loading=!1,console.log(await a),0))},async addArrayArchives(){this.arrayArchives.push({id:null,name:this.formArchive.name,archive:this.formArchive.archive,delete:null}),this.clearFormArchive()},deleteArrayArchives(i,t){if(t.id){let a=this.arrayArchives.find(e=>e.id===t.id);a.delete="delete"}else this.arrayArchives.splice(i,1)},async addArrayAdvanced(){this.arrayAdvanced.push({id:null,delete:null})},deleteArrayAdvanced(i,t){if(t.id){let a=this.arrayAdvanced.find(e=>e.id===t.id);a.delete="delete",a.debit="0",a.credit="0"}else this.arrayAdvanced.splice(i,1)},async fetchInfoCashReceipt(i){const t=o();t.isLoading=!0,await s.get(`/cashReceipt-info/${i}`).then(async a=>{console.log("RESULT INFO",a),t.isLoading=!1,this.formulario=await a.data.data,this.arrayAdvanced=await a.data.data.cash_receipt_advanceds,this.arrayArchives=await a.data.data.archives_cashreceipts,this.clonarForm(),this.cashReceiptData.id=i}).catch(async a=>{t.isLoading=!1,console.log(await a)})},async fetchInfoPdf(i){const t=o();t.isLoading=!0,await s.get(`/cashReceipt-infoPdf/${i}`).then(async a=>{console.log("RESULT PDF",a),t.isLoading=!1,this.formularioPdf=await a.data.data,this.arrayAdvanced=await a.data.data.cash_receipt_advanceds,this.arrayArchives=await a.data.data.archives_cashreceipts,this.third_customer=await a.data.data.third_customer,this.clonarForm(),this.cashReceiptData.id=i}).catch(async a=>{t.isLoading=!1,console.log(await a)})},async printPdf(i){const t=o();t.isLoading=!0,await s.get(`/cashReceipt-pdf/${i}`).then(async a=>{t.isLoading=!1,a.data.code===200&&(this.formulario=a.data.data,r.toast("\xC9xito",a.data.message,"success")),a.data.code===500&&r.toast("Error",a.data.message,"danger")}).catch(async a=>{t.isLoading=!1,console.log(await a)})},async sendMailPdf(){const i=o(),t=new FormData;for(const a in this.formularioPdf)t.append(a,this.formularioPdf[a]);i.isLoading=!0,await s.post("/cashReceipt-sendMailPdf",t).then(async a=>{i.isLoading=!1,a.data.code===200&&(this.formulario=a.data.data,r.toast("\xC9xito",a.data.message,"success")),a.data.code===500&&r.toast("Error",a.data.message,"danger")}).catch(async a=>{i.isLoading=!1,console.log(await a)})}}});export{f as u};
